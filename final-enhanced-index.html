<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnam Holiday Planner - Complete Guide</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        body {
            background-color: #f9fafb;
            color: #1f2937;
        }
        .highlight-link {
            color: #2563eb;
            cursor: pointer;
            border-bottom: 1px dotted #2563eb;
        }
        .highlight-link:hover {
            color: #1d4ed8;
            border-bottom: 1px solid #1d4ed8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Complete Enhanced Data
        const destinations = [
            {
                "id": "hanoi",
                "name": "Hanoi",
                "region": "north",
                "coordinates": [21.0285, 105.8542],
                "description": "Vietnam's capital city with rich history, French colonial architecture, and incredible street food scene",
                "highlights": [
                    "Old Quarter with narrow streets and traditional shop houses",
                    "Train Street coffee experience",
                    "Water puppet shows",
                    "Imperial Citadel",
                    "Vietnamese Women's Museum",
                    "Bia Hoi Corner - famous beer street"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "October-April (cool and dry), December ideal",
                "transportFromSaigon": "1.5 hour flight or 12-hour luxury train",
                "airports": {
                    "main": "Noi Bai International Airport (HAN)",
                    "distanceFromCenter": "28km north of city center",
                    "note": "More expensive from US West Coast, best for north-to-south travel"
                },
                "flightInfo": {
                    "fromUSA": "$800-1500 economy, $3500-7500 business",
                    "domesticFromSGN": "$50-150, 2h 10min",
                    "airlines": ["Vietnam Airlines", "United Airlines", "Singapore Airlines"]
                },
                "accommodations": [
                    {
                        "name": "Hanoi Central Apartment",
                        "url": "https://www.airbnb.com/l/lVYsEX3I",
                        "type": "Airbnb",
                        "description": "Central location apartment"
                    },
                    {
                        "name": "Hanoi Old Quarter Stay",
                        "url": "https://www.airbnb.com/l/CbzshNeY",
                        "type": "Airbnb",
                        "description": "Traditional Old Quarter accommodation"
                    },
                    {
                        "name": "Hanoi Modern Apartment",
                        "url": "https://www.airbnb.com/l/48oZJI7D",
                        "type": "Airbnb",
                        "description": "Modern apartment with amenities"
                    }
                ]
            },
            {
                "id": "sapa",
                "name": "Sapa",
                "region": "north",
                "coordinates": [22.3380, 103.8441],
                "description": "Mountainous town famous for terraced rice fields, ethnic minority villages, and trekking adventures",
                "highlights": [
                    "Terraced rice fields and mountain landscapes",
                    "Ethnic minority villages (Hmong, Red Dao)",
                    "Fansipan Mountain - highest peak in Vietnam",
                    "Sapa Market with local crafts",
                    "Multi-day trekking adventures",
                    "Traditional homestay experiences"
                ],
                "duration": "2-4 days",
                "bestTimeToVisit": "September-November, March-May, December for winter landscapes",
                "transportFromHanoi": "3.5 hour train + 1 hour bus, or 5 hour direct bus",
                "accommodations": [
                    {
                        "name": "Sapa Mountain View 1",
                        "url": "https://www.airbnb.com/l/XGAKTKj7",
                        "type": "Airbnb",
                        "description": "Mountain views in Sapa region"
                    },
                    {
                        "name": "Sapa Traditional Stay",
                        "url": "https://www.airbnb.com/l/KDXmX08E",
                        "type": "Airbnb",
                        "description": "Traditional accommodation in Sapa"
                    },
                    {
                        "name": "Sapa Mountain Lodge",
                        "url": "https://www.airbnb.com/l/zEKZ8ijv",
                        "type": "Airbnb",
                        "description": "Mountain lodge with panoramic views"
                    },
                    {
                        "name": "Sapa Valley Retreat",
                        "url": "https://www.airbnb.com/l/RjNnKSp6",
                        "type": "Airbnb",
                        "description": "Valley retreat accommodation"
                    },
                    {
                        "name": "Sapa Highland Home",
                        "url": "https://www.airbnb.com/l/4F2Espxm",
                        "type": "Airbnb",
                        "description": "Highland home with traditional charm"
                    }
                ]
            },
            {
                "id": "ha-giang",
                "name": "Ha Giang",
                "region": "north",
                "coordinates": [22.8025, 104.9784],
                "description": "Mountainous province with UNESCO Geopark, home to 17 ethnic groups and the famous Ha Giang Loop",
                "highlights": [
                    "Ha Giang Loop - 3 day motorbike tour",
                    "Dong Van Karst Plateau UNESCO Geopark",
                    "Heaven's Gate viewpoint",
                    "Hmong King Palace",
                    "Lung Ho valley viewpoint",
                    "Traditional hemp textile villages"
                ],
                "duration": "3-4 days (including loop)",
                "bestTimeToVisit": "September-November, March-May, December for clear mountain views",
                "transportFromHanoi": "8-hour luxury van ride",
                "tourProviders": [
                    {
                        "name": "Ha Giang Loop Tours",
                        "url": "https://hagianglooptours.com/",
                        "description": "3-day/3-night epic tours from Hanoi"
                    },
                    {
                        "name": "Vision Travel",
                        "url": "https://visiontravelagent.com/",
                        "description": "Trusted local agency since 2013"
                    },
                    {
                        "name": "GetYourGuide",
                        "url": "https://www.getyourguide.com/ha-giang-l149376/",
                        "description": "International booking platform"
                    }
                ]
            },
            {
                "id": "ha-long-bay",
                "name": "Ha Long Bay",
                "region": "north",
                "coordinates": [20.9101, 107.1839],
                "description": "UNESCO World Heritage site with over 1,600 limestone karsts rising from emerald waters. Famous for traditional junk boat cruises and floating fishing villages.",
                "highlights": [
                    "UNESCO World Heritage limestone karst formations",
                    "Traditional junk boat cruises",
                    "Kayaking through hidden caves and grottos",
                    "Floating fishing villages",
                    "Swimming in emerald waters",
                    "Overnight luxury boat stays",
                    "Sung Sot Cave (Surprise Cave)"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "October-April, December perfect for clear skies",
                "transportFromHanoi": "3.5 hour drive or bus to Halong City + boat",
                "accommodations": [
                    {
                        "name": "Ha Long Bay Luxury Retreat",
                        "url": "https://www.airbnb.com/l/nlXPLHDH",
                        "type": "Airbnb",
                        "description": "Luxury bay view accommodation"
                    }
                ]
            },
            {
                "id": "lan-ha-bay",
                "name": "Lan Ha Bay",
                "region": "north",
                "coordinates": [20.7333, 107.0833],
                "description": "Less crowded alternative to Ha Long Bay with pristine waters, dramatic limestone cliffs, and peaceful atmosphere. Part of Cat Ba Island area.",
                "highlights": [
                    "Fewer crowds than Ha Long Bay",
                    "Pristine emerald waters and dramatic cliffs",
                    "Excellent kayaking opportunities",
                    "Swimming and beach relaxation",
                    "Floating fishing villages",
                    "Day trips from Cat Ba Island",
                    "Vacay vibes and peaceful atmosphere"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "March-May, September-November, December ideal",
                "transportFromHanoi": "3-hour bus + speedboat via Cat Ba Island",
                "accommodations": [
                    {
                        "name": "Lan Ha Bay Escape",
                        "url": "https://www.airbnb.com/l/89kNc5sB",
                        "type": "Airbnb",
                        "description": "Peaceful bay escape with water access"
                    }
                ]
            },
            {
                "id": "cat-ba-island",
                "name": "Cat Ba Island",
                "region": "north",
                "coordinates": [20.8167, 107.0500],
                "description": "Largest island in Lan Ha Bay, alternative to Ha Long Bay with fewer crowds",
                "highlights": [
                    "Cat Ba National Park",
                    "Cannon Fort viewpoint",
                    "Hang Quan Hospital Cave (Vietnam War site)",
                    "Dong Trung Trang Cave",
                    "Kayaking in Lan Ha Bay",
                    "Fresh seafood restaurants"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "March-May, September-November, December for clear weather",
                "transportFromHanoi": "3-hour bus + speedboat journey",
                "tourProviders": [
                    {
                        "name": "Cat Ba Express",
                        "url": "https://catbaexpress.com/",
                        "description": "2-day tours with hotel accommodation"
                    }
                ]
            },
            {
                "id": "ninh-binh",
                "name": "Ninh Binh",
                "region": "north",
                "coordinates": [20.2506, 105.9745],
                "description": "Known as 'Halong Bay on Land' with karst cliffs, rice fields, and ancient temples",
                "highlights": [
                    "Karst limestone cliffs and formations",
                    "Emerald rice field landscapes",
                    "Bai Dinh Pagoda - largest Buddhist temple complex",
                    "Hang Mua Pagoda viewpoint (500 steps climb)",
                    "Trang An scenic boat tours",
                    "Traditional BBQ goat meat"
                ],
                "duration": "1-2 days",
                "bestTimeToVisit": "October-April, December ideal for clear skies"
            },
            {
                "id": "hoi-an",
                "name": "Hoi An",
                "region": "central",
                "coordinates": [15.8801, 108.3380],
                "description": "UNESCO World Heritage ancient trading port famous for lanterns, tailors, and cuisine",
                "highlights": [
                    "Ancient Town with Japanese Covered Bridge",
                    "Full Moon Lantern Festival (monthly)",
                    "Custom tailor shops",
                    "Cooking classes and food tours",
                    "Basket boat tours in coconut forest",
                    "Night market along Thu Bon River"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "February-August, December can be rainy",
                "transportFromHue": "3.5-hour motorbike ride via Hai Van Pass",
                "airports": {
                    "main": "Da Nang Airport (DAD)",
                    "distanceFromCenter": "30km from Hoi An"
                }
            },
            {
                "id": "saigon",
                "name": "Ho Chi Minh City (Saigon)",
                "region": "south",
                "coordinates": [10.8231, 106.6297],
                "description": "Vietnam's largest city with French colonial architecture, vibrant nightlife, and diverse food scene",
                "highlights": [
                    "Ben Thanh Market",
                    "Notre-Dame Cathedral and Central Post Office",
                    "Reunification Palace",
                    "War Remnants Museum",
                    "Bui Vien backpacker district",
                    "Rooftop bars in District 1",
                    "Cu Chi Tunnels day trip",
                    "Man Moi Tao Dan park area"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "December-April, December perfect weather",
                "transportFromHanoi": "2-hour flight",
                "airports": {
                    "main": "Tan Son Nhat International Airport (SGN)",
                    "distanceFromCenter": "8km from city center",
                    "note": "Cheapest to fly into from US, best for south-to-north travel"
                },
                "flightInfo": {
                    "fromUSA": "$700-1400 economy, $3000-6500 business",
                    "domesticFromHAN": "$50-150, 2h 10min",
                    "airlines": ["Vietnam Airlines", "Vietjet", "Bamboo Airways"]
                }
            }
        ];

        // December Travel Itinerary Suggestions
        const decemberItineraries = [
            {
                "name": "December 5-14 (HG+MN Route)",
                "duration": "9 days",
                "route": "Ha Giang → Mountains → North Vietnam",
                "highlights": ["Ha Giang Loop in winter", "Mountain landscapes", "Clear weather for viewpoints"],
                "bestFor": "Adventure seekers, mountain lovers"
            },
            {
                "name": "December 14-21 (M+N Route)",
                "duration": "7 days",
                "route": "Mixed North Vietnam Experience",
                "highlights": ["Hanoi cultural immersion", "Sapa winter trekking", "Ha Long Bay relaxation"],
                "bestFor": "Cultural experience + relaxation"
            }
        ];

        const enhancedRestaurants = [
            // Hanoi Restaurants
            {
                "id": "bun-cha-huong-lien",
                "name": "Bún Chả Hương Liên",
                "destinationId": "hanoi",
                "address": "24 Lê Văn Hưu, Hai Bà Trưng, Hanoi",
                "specialty": "Bun Cha",
                "description": "Famous 'Bun Cha Obama' restaurant where Anthony Bourdain hosted former US President Obama for Parts Unknown. Traditional grilled pork with rice noodles in aromatic broth.",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 4,
                "tags": ["bourdain", "bun-cha", "famous", "obama", "celebrity"],
                "awards": ["Featured on Bourdain's Parts Unknown"],
                "mustTryDishes": ["Classic Bun Cha", "Grilled pork patties", "Rice vermicelli"],
                "bookingLinks": {
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293924-d1158167-Reviews-Bun_Cha_Huong_Lien-Hanoi.html",
                    "google": "https://www.google.com/search?q=Bun+Cha+Huong+Lien+Hanoi+restaurant"
                }
            },
            {
                "id": "pho-gia-truyen-bat-dan",
                "name": "Phở Gia Truyền Bát Đàn",
                "destinationId": "hanoi",
                "address": "49 Bát Đàn, Hoàn Kiếm, Hanoi",
                "specialty": "Pho Bo (beef noodle soup)",
                "description": "Considered the best pho in Hanoi with perfect balance of richness and delicacy. Starts selling at 6am and sells out quickly. Only serves pho tai (medium rare beef) and pho chin (well-cooked beef).",
                "priceRange": "$",
                "userRating": 5,
                "openingHours": "06:00-10:00 (until sold out)",
                "tags": ["pho", "breakfast", "traditional", "early-bird", "legendary"],
                "awards": ["Eater recommended", "Local legend"],
                "mustTryDishes": ["Pho Tai (medium rare beef)", "Pho Chin (well-cooked beef)", "Banh Quay (fried breadsticks)"]
            },
            {
                "id": "gia-restaurant",
                "name": "Gia",
                "destinationId": "hanoi",
                "specialty": "Contemporary Vietnamese",
                "description": "One Michelin Star restaurant (retained 2025). Elegant contemporary Vietnamese cuisine with refined techniques and local ingredients.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-star", "fine-dining", "contemporary", "vietnamese"],
                "awards": ["Michelin One Star 2025"],
                "mustTryDishes": ["Tasting menu featuring Vietnamese classics", "Seasonal specialties"],
                "bookingLinks": {
                    "michelin": "https://guide.michelin.com/vn/en/hanoi/restaurant/gia"
                }
            },
            // Ho Chi Minh City Restaurants (Comprehensive List)
            {
                "id": "anan-saigon",
                "name": "Ănăn Saigon",
                "destinationId": "saigon",
                "specialty": "Modern Vietnamese Fusion",
                "description": "Michelin One Star restaurant. Chef-owner Peter Cuong Franklin pioneered Vietnamese fusion cuisine, elevating Vietnamese flavors with French cooking techniques. Whimsically modern twist on Vietnamese street food.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-star", "modern-vietnamese", "fine-dining", "fusion", "creative"],
                "awards": ["Michelin One Star 2025", "Pioneer of Vietnamese Fusion"],
                "mustTryDishes": ["Modern Vietnamese tasting menu", "Street food elevated", "French-Vietnamese fusion"],
                "bookingLinks": {
                    "michelin": "https://guide.michelin.com/vn/en/ho-chi-minh/restaurant/anan-saigon",
                    "website": "https://www.anansaigon.com"
                }
            },
            {
                "id": "the-lunch-lady",
                "name": "The Lunch Lady (Nguyễn Thị Thành)",
                "destinationId": "saigon",
                "specialty": "Bún bò Huế and rotating daily menu",
                "description": "Anthony Bourdain's legendary find. Only serves 100 people per day. Tony called her broth 'that the gods were suckled on.' Daily rotating menu of authentic Vietnamese dishes.",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 5,
                "tags": ["street-food", "bourdain", "daily-menu", "authentic", "legendary", "limited-seats"],
                "awards": ["Featured on Bourdain's No Reservations", "Netflix Street Food series"],
                "mustTryDishes": ["Bún bò Huế (Hue-style beef soup)", "Daily specials", "Rotating Vietnamese classics"],
                "openingHours": "Limited to 100 people per day"
            },
            {
                "id": "pho-le",
                "name": "Pho Le",
                "destinationId": "saigon",
                "address": "415 Nguyễn Trãi, Phường 7, Quận 5",
                "specialty": "Pho thap cam (mixed beef pho)",
                "description": "Considered the best pho not just in Saigon but in all of Vietnam by food experts. Serves pho thap cam with beef tendon, meatballs, and brisket. Southern Vietnamese style with sweeter broth.",
                "priceRange": "$",
                "userRating": 5,
                "tags": ["pho", "southern-style", "best-in-vietnam", "authentic", "local-favorite"],
                "awards": ["Food expert's #1 pho in Vietnam"],
                "mustTryDishes": ["Pho thap cam with beef tendon", "Mixed beef pho", "Sweet southern-style broth"]
            },
            {
                "id": "banh-mi-huynh-hoa",
                "name": "Banh Mi Huynh Hoa",
                "destinationId": "saigon",
                "address": "26 Lê Thị Riêng, Quận 1",
                "specialty": "Extremely loaded banh mi",
                "description": "Popular with locals, serves the largest and most loaded banh mi with thick layer of paté and sweet pork floss. Known locally as 'Banh Mi O Moi' (lesbian banh mi), owned by a lesbian couple.",
                "priceRange": "$",
                "userRating": 5,
                "tags": ["banh-mi", "loaded", "pate", "local-favorite", "generous-portions", "lgbt-owned"],
                "mustTryDishes": ["Loaded Banh Mi with paté", "Sweet pork floss", "Overstuffed Vietnamese baguette"]
            },
            {
                "id": "banh-mi-bay-ho",
                "name": "Banh Mi Bay Ho",
                "destinationId": "saigon",
                "address": "19 Huỳnh Khương Ninh, Đa Kao, Quận 1",
                "specialty": "Traditional banh mi",
                "description": "Featured on Netflix's Street Food series. Family-run operation with secret paté recipe passed down through generations. Known for authentic flavors and traditional preparation.",
                "priceRange": "$",
                "userRating": 4,
                "tags": ["banh-mi", "netflix-featured", "family-recipe", "traditional", "secret-pate"],
                "awards": ["Netflix Street Food series", "National Geographic recommended"],
                "mustTryDishes": ["Traditional banh mi", "Secret family paté recipe", "Classic Vietnamese sandwich"]
            },
            {
                "id": "oc-loan",
                "name": "Oc Loan",
                "destinationId": "saigon",
                "specialty": "Seafood and shellfish",
                "description": "Seafood restaurant with an interesting backstory - the owner was formerly a 'gangster.' Known for exceptional seafood dishes with unique preparations.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["seafood", "unique-backstory", "shellfish", "local-character"],
                "awards": ["National Geographic recommended"],
                "mustTryDishes": ["Clams in lemongrass broth", "Barbecued prawns", "Scallops with peanuts and spring onions"]
            },
            {
                "id": "com-nieu-sai-gon",
                "name": "Cơm Niêu Sài Gòn",
                "destinationId": "saigon",
                "specialty": "Flying rice and traditional Vietnamese",
                "description": "Famous for dramatically smashing clay pots to serve rice. Bourdain visited here and enjoyed their theatrical presentation. Traditional Vietnamese restaurant with a show.",
                "priceRange": "$$",
                "bourdainPick": true,
                "userRating": 4,
                "tags": ["bourdain", "theatrical", "clay-pot", "traditional", "flying-rice"],
                "awards": ["Featured on Bourdain's A Cook's Tour"],
                "mustTryDishes": ["Flying rice (clay pot smashing)", "Canh chua (sour soup)", "Thịt kho trứng", "Lobster and crab stir fry"]
            },
            {
                "id": "nen-light",
                "name": "Nén Light",
                "destinationId": "saigon",
                "specialty": "Contemporary Vietnamese tasting menu",
                "description": "Michelin-endorsed contemporary restaurant offering immersive tasting menus featuring ingredients from across Vietnam. Modern approach to Vietnamese cuisine.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-endorsed", "contemporary", "tasting-menu", "immersive", "vietnamese"],
                "awards": ["Michelin endorsed"],
                "mustTryDishes": ["Immersive tasting menu", "Ingredients from across Vietnam", "Contemporary Vietnamese cuisine"]
            },
            {
                "id": "secret-garden",
                "name": "Secret Garden",
                "destinationId": "saigon",
                "specialty": "Authentic Vietnamese home cooking",
                "description": "Rooftop oasis serving authentic, home-cooked Vietnamese food. Beautifully decorated with central Vietnamese-style lanterns. Hidden gem with peaceful atmosphere.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["rooftop", "home-cooking", "authentic", "lanterns", "hidden-gem"],
                "mustTryDishes": ["Home-style Vietnamese dishes", "Traditional family recipes", "Authentic preparations"]
            },
            {
                "id": "cuc-gach",
                "name": "Cuc Gach Restaurant",
                "destinationId": "saigon",
                "specialty": "Traditional Vietnamese cuisine",
                "description": "Found in most travel guides as a top 10 place to eat in Ho Chi Minh City. Gained popularity after Angelina Jolie and Brad Pitt dined here during their Vietnam visit.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["celebrity-visited", "top-10", "traditional", "travel-guide-favorite"],
                "awards": ["Celebrity visited (Angelina Jolie & Brad Pitt)"],
                "mustTryDishes": ["Traditional Vietnamese specialties", "Celebrity-approved dishes", "Authentic local cuisine"]
            },
            // Hoi An Restaurant
            {
                "id": "banh-mi-phuong",
                "name": "Banh Mi Phuong",
                "destinationId": "hoi-an",
                "address": "2B Phan Chu Trinh, Hoi An",
                "specialty": "Banh Mi",
                "description": "Anthony Bourdain's favorite banh mi spot and considered the best according to travel itineraries. Famous for authentic flavors and traditional preparation methods.",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 5,
                "tags": ["banh-mi", "bourdain", "famous", "best", "authentic"],
                "awards": ["Bourdain's favorite", "Travel guide favorite"],
                "mustTryDishes": ["Classic Banh Mi", "Traditional Vietnamese baguette"],
                "bookingLinks": {
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g298082-d1158083-Reviews-Banh_Mi_Phuong-Hoi_An_Quang_Nam_Province.html"
                }
            }
        ];

        const flightBookingLinks = {
            "google": "https://www.google.com/travel/flights",
            "kayak": "https://www.kayak.com/flights",
            "expedia": "https://www.expedia.com/Flights",
            "vietnamAirlines": "https://www.vietnamairlines.com",
            "vietjet": "https://www.vietjetair.com",
            "skyscanner": "https://www.skyscanner.com"
        };

        const regionColors = {
            north: '#10B981',
            central: '#F59E0B',
            south: '#EF4444'
        };

        // Helper function to create Google search links
        const createGoogleSearchLink = (query) => {
            const encodedQuery = encodeURIComponent(query + " Vietnam travel");
            return `https://www.google.com/search?q=${encodedQuery}`;
        };

        // Components
        const ClickableHighlight = ({ highlight }) => (
            <a
                href={createGoogleSearchLink(highlight)}
                target="_blank"
                rel="noopener noreferrer"
                className="highlight-link"
            >
                {highlight}
            </a>
        );

        const AccommodationCard = ({ destination }) => {
            if (!destination.accommodations) return null;

            return (
                <div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-purple-900 mb-3 flex items-center gap-2">
                        🏠 Accommodations
                    </h3>
                    <div className="space-y-3">
                        {destination.accommodations.map((accommodation, index) => (
                            <div key={index} className="border-b border-purple-100 pb-2 last:border-b-0">
                                <a
                                    href={accommodation.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="font-medium text-purple-800 hover:text-purple-900"
                                >
                                    {accommodation.name} ↗
                                </a>
                                <p className="text-sm text-purple-700">
                                    {accommodation.type} - {accommodation.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const DecemberItineraryCard = () => (
            <div className="bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-6">
                <h2 className="text-xl font-semibold text-indigo-900 mb-4 flex items-center gap-2">
                    📅 December 2024 Itinerary Ideas
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {decemberItineraries.map((itinerary, index) => (
                        <div key={index} className="bg-white border border-indigo-100 rounded-lg p-4">
                            <h3 className="font-semibold text-indigo-800 mb-2">{itinerary.name}</h3>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Duration:</strong> {itinerary.duration}
                            </p>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Route:</strong> {itinerary.route}
                            </p>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Best for:</strong> {itinerary.bestFor}
                            </p>
                            <div className="mt-2">
                                <p className="text-xs text-indigo-600 font-medium">Highlights:</p>
                                <ul className="text-xs text-indigo-600 list-disc list-inside">
                                    {itinerary.highlights.map((highlight, idx) => (
                                        <li key={idx}>{highlight}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const FlightInfoCard = ({ destination }) => {
            if (!destination.flightInfo && !destination.airports) return null;

            return (
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-blue-900 mb-3 flex items-center gap-2">
                        ✈️ Flight Information
                    </h3>

                    {destination.airports && (
                        <div className="mb-3">
                            <p className="text-sm text-blue-800">
                                <strong>Airport:</strong> {destination.airports.main}
                            </p>
                            <p className="text-sm text-blue-700">
                                📍 {destination.airports.distanceFromCenter}
                            </p>
                            {destination.airports.note && (
                                <p className="text-xs text-blue-600 mt-1 font-medium">
                                    💡 {destination.airports.note}
                                </p>
                            )}
                        </div>
                    )}

                    {destination.flightInfo && (
                        <div className="space-y-2">
                            <p className="text-sm text-blue-800">
                                <strong>From USA:</strong> {destination.flightInfo.fromUSA}
                            </p>
                            {destination.flightInfo.domesticFromSGN && (
                                <p className="text-sm text-blue-800">
                                    <strong>From Saigon:</strong> {destination.flightInfo.domesticFromSGN}
                                </p>
                            )}
                            {destination.flightInfo.domesticFromHAN && (
                                <p className="text-sm text-blue-800">
                                    <strong>From Hanoi:</strong> {destination.flightInfo.domesticFromHAN}
                                </p>
                            )}
                            <div className="flex flex-wrap gap-2 mt-3">
                                {Object.entries(flightBookingLinks).map(([name, url]) => (
                                    <a
                                        key={name}
                                        href={url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"
                                    >
                                        {name}
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const TourProvidersCard = ({ destination }) => {
            if (!destination.tourProviders) return null;

            return (
                <div className="bg-green-50 border border-green-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-green-900 mb-3 flex items-center gap-2">
                        🎯 Tour Providers
                    </h3>
                    <div className="space-y-3">
                        {destination.tourProviders.map((provider, index) => (
                            <div key={index} className="border-b border-green-100 pb-2 last:border-b-0">
                                <a
                                    href={provider.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="font-medium text-green-800 hover:text-green-900"
                                >
                                    {provider.name} ↗
                                </a>
                                <p className="text-sm text-green-700">{provider.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const EnhancedRestaurantCard = ({ restaurant }) => (
            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4">
                <div className="flex items-start justify-between mb-3">
                    <div>
                        <h3 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                            {restaurant.name}
                            {restaurant.bourdainPick && (
                                <span className="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium">
                                    Bourdain's Pick
                                </span>
                            )}
                            {restaurant.awards?.includes("Michelin One Star 2025") && (
                                <span className="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full font-medium">
                                    ⭐ Michelin Star
                                </span>
                            )}
                        </h3>
                        <p className="text-blue-600 font-medium">{restaurant.specialty}</p>
                        {restaurant.address && (
                            <p className="text-sm text-gray-500 mt-1">📍 {restaurant.address}</p>
                        )}
                    </div>
                    <div className="text-right">
                        <div className="text-lg font-bold text-green-600">{restaurant.priceRange}</div>
                        {restaurant.userRating && (
                            <div className="flex items-center gap-1 mt-1">
                                <span className="text-yellow-400">★</span>
                                <span className="text-sm font-medium">{restaurant.userRating}/5</span>
                            </div>
                        )}
                    </div>
                </div>

                <p className="text-gray-700 mb-4">{restaurant.description}</p>

                {restaurant.mustTryDishes && (
                    <div className="mb-4">
                        <h4 className="font-medium text-gray-800 mb-2">Must Try Dishes:</h4>
                        <div className="flex flex-wrap gap-2">
                            {restaurant.mustTryDishes.map((dish, index) => (
                                <span key={index} className="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">
                                    {dish}
                                </span>
                            ))}
                        </div>
                    </div>
                )}

                <div className="flex items-center justify-between">
                    <div className="flex flex-wrap gap-2">
                        {restaurant.tags?.map((tag, index) => (
                            <span key={index} className="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">
                                {tag.replace('-', ' ')}
                            </span>
                        ))}
                    </div>

                    {restaurant.bookingLinks && (
                        <div className="flex gap-2">
                            {Object.entries(restaurant.bookingLinks).map(([platform, url]) => (
                                <a
                                    key={platform}
                                    href={url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600"
                                >
                                    {platform} ↗
                                </a>
                            ))}
                        </div>
                    )}
                </div>

                {restaurant.openingHours && (
                    <p className="text-sm text-gray-500 mt-2">
                        🕒 {restaurant.openingHours}
                    </p>
                )}
            </div>
        );

        const VietnamMap = ({ destinations, onDestinationClick }) => {
            useEffect(() => {
                const map = L.map('map').setView([16.0, 106.0], 6);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);

                destinations.forEach(destination => {
                    const marker = L.marker(destination.coordinates)
                        .addTo(map)
                        .bindPopup(`
                            <div class="text-center">
                                <h3 class="font-bold text-lg">${destination.name}</h3>
                                <p class="text-sm text-gray-600 mt-1">${destination.description}</p>
                                <div class="mt-2">
                                    <span class="inline-block px-2 py-1 rounded-full text-xs font-medium text-white"
                                          style="background-color: ${regionColors[destination.region]}">
                                        ${destination.region.toUpperCase()}
                                    </span>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">📅 ${destination.duration}</p>
                                ${destination.airports ? `<p class="text-xs text-gray-500">✈️ ${destination.airports.main}</p>` : ''}
                            </div>
                        `);

                    marker.on('click', () => onDestinationClick(destination));
                });

                return () => {
                    map.remove();
                };
            }, [destinations]);

            return (
                <div>
                    <div className="mb-4 flex gap-4 text-sm">
                        <div className="flex items-center gap-2">
                            <div className="w-4 h-4 rounded-full bg-green-500"></div>
                            <span>North Vietnam</span>
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="w-4 h-4 rounded-full bg-yellow-500"></div>
                            <span>Central Vietnam</span>
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="w-4 h-4 rounded-full bg-red-500"></div>
                            <span>South Vietnam</span>
                        </div>
                    </div>
                    <div id="map" style={{ height: '500px', width: '100%' }} className="rounded-lg shadow-lg"></div>
                </div>
            );
        };

        const DestinationPage = ({ destination, onBack }) => (
            <div className="min-h-screen bg-gray-50">
                <div className="bg-white shadow-sm border-b border-gray-200">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                        <button
                            onClick={onBack}
                            className="flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-4 transition-colors"
                        >
                            ← Back to Map
                        </button>

                        <h1 className="text-3xl font-bold text-gray-900 mb-2">{destination.name}</h1>
                        <p className="text-gray-600 text-lg mb-4">{destination.description}</p>

                        <div className="flex items-center gap-4 text-sm text-gray-500 mb-6">
                            <span
                                className="px-3 py-1 rounded-full text-xs font-medium text-white"
                                style={{backgroundColor: regionColors[destination.region]}}
                            >
                                {destination.region.toUpperCase()} VIETNAM
                            </span>
                            <span>📅 {destination.duration}</span>
                            <span>🌡️ {destination.bestTimeToVisit}</span>
                            <span>📍 {destination.coordinates[0].toFixed(2)}, {destination.coordinates[1].toFixed(2)}</span>
                        </div>
                    </div>
                </div>

                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 space-y-6">
                            {/* Highlights */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">Highlights</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {destination.highlights.map((highlight, index) => (
                                        <div key={index} className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                                            <span className="text-blue-500 mt-1">•</span>
                                            <ClickableHighlight highlight={highlight} />
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Food Recommendations */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">🍜 Food Recommendations</h2>
                                {enhancedRestaurants.filter(r => r.destinationId === destination.id).map(restaurant => (
                                    <EnhancedRestaurantCard key={restaurant.id} restaurant={restaurant} />
                                ))}
                                {enhancedRestaurants.filter(r => r.destinationId === destination.id).length === 0 && (
                                    <p className="text-gray-600 text-center py-8">
                                        Detailed restaurant recommendations coming soon for this destination!
                                    </p>
                                )}
                            </div>
                        </div>

                        <div className="space-y-6">
                            {/* Flight Information */}
                            <FlightInfoCard destination={destination} />

                            {/* Tour Providers */}
                            <TourProvidersCard destination={destination} />

                            {/* Accommodations */}
                            <AccommodationCard destination={destination} />

                            {/* Transportation */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">🚌 Getting There</h2>
                                <div className="space-y-3">
                                    {destination.transportFromHanoi && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Hanoi:</span>
                                            <span className="text-gray-600">{destination.transportFromHanoi}</span>
                                        </div>
                                    )}
                                    {destination.transportFromSaigon && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Saigon:</span>
                                            <span className="text-gray-600">{destination.transportFromSaigon}</span>
                                        </div>
                                    )}
                                    {destination.transportFromHue && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Hue:</span>
                                            <span className="text-gray-600">{destination.transportFromHue}</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        const HomePage = ({ destinations, onDestinationSelect }) => {
            const [viewMode, setViewMode] = useState('map');
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedRegion, setSelectedRegion] = useState('all');

            const filteredDestinations = destinations.filter(destination => {
                const matchesSearch = destination.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                     destination.description.toLowerCase().includes(searchTerm.toLowerCase());
                const matchesRegion = selectedRegion === 'all' || destination.region === selectedRegion;
                return matchesSearch && matchesRegion;
            });

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="bg-white shadow-sm border-b border-gray-200">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">Vietnam Holiday Planner</h1>
                            <p className="text-gray-600 mb-6">Complete guide with Michelin-starred restaurants, authentic experiences, flight info, and December 2024 itineraries</p>

                            <div className="flex flex-col sm:flex-row gap-4 mb-6">
                                <input
                                    type="text"
                                    placeholder="Search destinations..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                />
                                <select
                                    value={selectedRegion}
                                    onChange={(e) => setSelectedRegion(e.target.value)}
                                    className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="all">All Regions</option>
                                    <option value="north">North Vietnam</option>
                                    <option value="central">Central Vietnam</option>
                                    <option value="south">South Vietnam</option>
                                </select>
                                <div className="flex bg-gray-100 rounded-lg p-1">
                                    <button
                                        onClick={() => setViewMode('map')}
                                        className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                                            viewMode === 'map' ? 'bg-white text-blue-600' : 'text-gray-600'
                                        }`}
                                    >
                                        🗺️ Map
                                    </button>
                                    <button
                                        onClick={() => setViewMode('grid')}
                                        className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                                            viewMode === 'grid' ? 'bg-white text-blue-600' : 'text-gray-600'
                                        }`}
                                    >
                                        📋 Grid
                                    </button>
                                </div>
                            </div>

                            {/* Quick Flight Links */}
                            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <h3 className="font-semibold text-blue-900 mb-2 flex items-center gap-2">
                                    ✈️ Book Flights to Vietnam
                                    <span className="text-sm font-normal text-blue-700">
                                        (SGN cheaper from US, HAN better for north-south route)
                                    </span>
                                </h3>
                                <div className="flex flex-wrap gap-2">
                                    {Object.entries(flightBookingLinks).map(([name, url]) => (
                                        <a
                                            key={name}
                                            href={url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200"
                                        >
                                            {name} ↗
                                        </a>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {/* December Itinerary Suggestions */}
                        <DecemberItineraryCard />

                        {viewMode === 'map' ? (
                            <VietnamMap
                                destinations={filteredDestinations}
                                onDestinationClick={onDestinationSelect}
                            />
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredDestinations.map((destination) => (
                                    <div key={destination.id} className="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 p-6"
                                         onClick={() => onDestinationSelect(destination)}>
                                        <div className="flex items-start justify-between mb-3">
                                            <h3 className="text-xl font-bold text-gray-800">{destination.name}</h3>
                                            <span
                                                className="px-3 py-1 rounded-full text-xs font-medium text-white"
                                                style={{backgroundColor: regionColors[destination.region]}}
                                            >
                                                {destination.region.toUpperCase()}
                                            </span>
                                        </div>

                                        <p className="text-gray-600 text-sm mb-4 line-clamp-3">
                                            {destination.description}
                                        </p>

                                        <div className="space-y-2">
                                            <h4 className="font-semibold text-sm text-gray-700">Highlights:</h4>
                                            <ul className="text-xs text-gray-600 space-y-1">
                                                {destination.highlights.slice(0, 3).map((highlight, index) => (
                                                    <li key={index} className="flex items-start gap-2">
                                                        <span className="text-blue-500 mt-1">•</span>
                                                        <span>{highlight}</span>
                                                    </li>
                                                ))}
                                                {destination.highlights.length > 3 && (
                                                    <li className="text-blue-500 text-xs font-medium">
                                                        +{destination.highlights.length - 3} more highlights
                                                    </li>
                                                )}
                                            </ul>
                                        </div>

                                        <div className="mt-4 pt-4 border-t border-gray-100">
                                            <div className="text-sm text-gray-500 mb-2">
                                                📅 {destination.duration} • 🌡️ Best: December
                                            </div>
                                            {destination.airports && (
                                                <div className="text-xs text-gray-500 mb-2">
                                                    ✈️ {destination.airports.main}
                                                </div>
                                            )}
                                            {destination.accommodations && (
                                                <div className="text-xs text-gray-500 mb-2">
                                                    🏠 {destination.accommodations.length} Airbnb options
                                                </div>
                                            )}
                                            <button className="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium">
                                                Explore Details
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main App
        const App = () => {
            const [selectedDestination, setSelectedDestination] = useState(null);

            return selectedDestination ? (
                <DestinationPage
                    destination={selectedDestination}
                    onBack={() => setSelectedDestination(null)}
                />
            ) : (
                <HomePage
                    destinations={destinations}
                    onDestinationSelect={setSelectedDestination}
                />
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>