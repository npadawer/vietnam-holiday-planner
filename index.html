<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnam Holiday Planner - Complete Guide</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        body {
            background: linear-gradient(135deg, #fef7cd 0%, #fff5b7 25%, #fffacd 100%);
            color: #8b4513;
            min-height: 100vh;
        }
        .highlight-link {
            color: #dc2626;
            cursor: pointer;
            border-bottom: 1px dotted #dc2626;
        }
        .highlight-link:hover {
            color: #b91c1c;
            border-bottom: 1px solid #b91c1c;
        }
        .vietnam-gradient {
            background: linear-gradient(45deg, #dc2626 0%, #fbbf24 50%, #dc2626 100%);
        }
        .bamboo-green {
            background-color: #22c55e;
        }
        .lotus-pink {
            background-color: #f472b6;
        }
        .route-tooltip {
            background: white !important;
            border: 2px solid #dc2626 !important;
            border-radius: 6px !important;
            box-shadow: 0 8px 16px rgba(220, 38, 38, 0.2) !important;
            font-family: system-ui, -apple-system, sans-serif !important;
        }
        .route-tooltip .leaflet-tooltip-content {
            margin: 0 !important;
            padding: 0 !important;
        }
        .leaflet-tooltip-top:before {
            border-top-color: #dc2626 !important;
        }
        .leaflet-tooltip-bottom:before {
            border-bottom-color: #dc2626 !important;
        }
        .leaflet-tooltip-left:before {
            border-left-color: #dc2626 !important;
        }
        .leaflet-tooltip-right:before {
            border-right-color: #dc2626 !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Complete Enhanced Data
        const destinations = [
            {
                "id": "hanoi",
                "name": "Hanoi",
                "region": "north",
                "coordinates": [21.0285, 105.8542],
                "description": "Vietnam's capital city with rich history, French colonial architecture, and incredible street food scene",
                "highlights": [
                    "Old Quarter with narrow streets and traditional shop houses",
                    "Train Street coffee experience",
                    "Water puppet shows",
                    "Imperial Citadel",
                    "Vietnamese Women's Museum",
                    "Bia Hoi Corner - famous beer street"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "October-April (cool and dry), December ideal",
                "decemberWeather": {
                    "temperature": "15-20°C (59-68°F)",
                    "rainfall": "20mm (0.8 inches) - very low",
                    "humidity": "70-75%",
                    "conditions": "Cool, dry, and sunny - perfect weather",
                    "clothing": "Light jacket needed for evenings, t-shirts during day",
                    "rainyDays": "2-3 days per month",
                    "pros": ["Ideal temperature", "Low rainfall", "Clear skies", "Perfect for walking"],
                    "cons": ["Can be chilly in early morning/evening"]
                },
                "transportFromSaigon": "1.5 hour flight or 12-hour luxury train",
                "detailedTransportation": {
                    "fromSaigon": {
                        "flights": {
                            "airlines": ["Vietnam Airlines", "VietJet Air", "Bamboo Airways"],
                            "frequency": "Every 30-60 minutes, 6am-10pm",
                            "duration": "1h 45min",
                            "cost": "$50-150 economy, $200-400 business",
                            "airports": "SGN (Tan Son Nhat) → HAN (Noi Bai)"
                        },
                        "trains": {
                            "routes": ["SE1/SE3 (Reunification Express)", "SE7 Luxury Train"],
                            "schedule": "SE1: Depart SGN 7:00pm → Arrive HAN 7:20am+1 (12h 20min)\nSE3: Depart SGN 6:10pm → Arrive HAN 6:00am+1 (11h 50min)",
                            "cost": "Hard seat: $35-45, Soft seat: $45-60, Sleeper: $60-80",
                            "booking": "vietnamrailway.com or station counter"
                        },
                        "buses": {
                            "companies": ["Sinh Tourist", "Hanh Cafe", "Mai Linh Express"],
                            "schedule": "Multiple departures 6:00am-11:00pm",
                            "duration": "28-32 hours with stops",
                            "cost": "$25-40 for sleeper bus",
                            "note": "Not recommended - extremely long journey"
                        }
                    },
                    "localTransportation": {
                        "airport": {
                            "taxi": "Airport taxi: $18-25 (45min), Grab: $12-18",
                            "bus": "Bus 86: $1 (1.5h to Old Quarter)",
                            "shuttle": "Jetstar shuttle: $2 (1h)"
                        },
                        "cityTransport": {
                            "motorbikeTaxi": "Xe om: $1-3 per ride, negotiate price",
                            "taxi": "Mai Linh, Vinasun: $0.50/km + $0.60 flag fall",
                            "grab": "GrabBike: $0.80-2, GrabCar: $2-5",
                            "bus": "City buses: $0.30 flat rate, routes 1-50",
                            "cyclo": "Tourist rickshaw: $3-8 per hour (negotiate)",
                            "walking": "Old Quarter very walkable, 15-20min between sites"
                        },
                        "rentalOptions": {
                            "motorbike": "$5-10/day, license required",
                            "bicycle": "$3-5/day from hostels/hotels",
                            "car": "$25-40/day + driver $20-30/day"
                        }
                    }
                },
                "airports": {
                    "main": "Noi Bai International Airport (HAN)",
                    "distanceFromCenter": "28km north of city center",
                    "note": "More expensive from US West Coast, best for north-to-south travel"
                },
                "flightInfo": {
                    "fromUSA": "$800-1500 economy, $3500-7500 business",
                    "domesticFromSGN": "$50-150, 2h 10min",
                    "airlines": ["Vietnam Airlines", "United Airlines", "Singapore Airlines"]
                },
                "accommodations": [
                    {
                        "name": "Hanoi Central Apartment",
                        "url": "https://www.airbnb.com/l/lVYsEX3I",
                        "type": "Airbnb",
                        "description": "Central location apartment"
                    },
                    {
                        "name": "Hanoi Old Quarter Stay",
                        "url": "https://www.airbnb.com/l/CbzshNeY",
                        "type": "Airbnb",
                        "description": "Traditional Old Quarter accommodation"
                    },
                    {
                        "name": "Hanoi Modern Apartment",
                        "url": "https://www.airbnb.com/l/48oZJI7D",
                        "type": "Airbnb",
                        "description": "Modern apartment with amenities"
                    }
                ]
            },
            {
                "id": "sapa",
                "name": "Sapa",
                "region": "north",
                "coordinates": [22.3380, 103.8441],
                "description": "Mountainous town famous for terraced rice fields, ethnic minority villages, and trekking adventures",
                "highlights": [
                    "Terraced rice fields and mountain landscapes",
                    "Ethnic minority villages (Hmong, Red Dao)",
                    "Fansipan Mountain - highest peak in Vietnam",
                    "Sapa Market with local crafts",
                    "Multi-day trekking adventures",
                    "Traditional homestay experiences"
                ],
                "duration": "2-4 days",
                "bestTimeToVisit": "September-November, March-May, December for winter landscapes",
                "decemberWeather": {
                    "temperature": "8-15°C (46-59°F)",
                    "rainfall": "30mm (1.2 inches) - low",
                    "humidity": "75-80%",
                    "conditions": "Cool and crisp with occasional mist, excellent mountain views",
                    "clothing": "Warm jacket essential, layers recommended, waterproof needed",
                    "rainyDays": "4-5 days per month",
                    "pros": ["Crystal clear mountain views", "Less crowded", "Dramatic winter landscapes", "Perfect for trekking"],
                    "cons": ["Cold mornings/evenings", "Can be misty", "Pack warm clothes"]
                },
                "transportFromHanoi": "3.5 hour train + 1 hour bus, or 5 hour direct bus",
                "detailedTransportation": {
                    "fromHanoi": {
                        "trains": {
                            "routes": ["SP1/SP3 (Hanoi → Lao Cai)", "Victoria Express"],
                            "schedule": "SP1: Depart HAN 9:35pm → Arrive Lao Cai 5:30am (7h 55min)\nSP3: Depart HAN 10:00pm → Arrive Lao Cai 6:20am (8h 20min)",
                            "cost": "Hard sleeper: $15-20, Soft sleeper: $25-35, Victoria Express: $60-80",
                            "note": "Then 1h bus from Lao Cai to Sapa ($3-5)"
                        },
                        "buses": {
                            "companies": ["Good Morning Sapa", "Sapa Express", "Inter Bus Line"],
                            "schedule": "Multiple departures: 6:30am, 8:30am, 1:30pm, 9:00pm, 10:30pm",
                            "duration": "5-6 hours direct",
                            "cost": "$8-15 standard bus, $12-18 luxury sleeper",
                            "pickup": "Old Quarter hotels, My Dinh station"
                        },
                        "privateCar": {
                            "duration": "3.5-4 hours",
                            "cost": "$60-100 for 1-4 people",
                            "companies": ["Sapa Sisters", "Highland Travel"],
                            "advantages": "Flexible departure, scenic stops"
                        }
                    },
                    "localTransportation": {
                        "inSapa": {
                            "walking": "Town center very compact, 10min walk end-to-end",
                            "motorbikeTaxi": "Xe om: $2-5 to nearby villages",
                            "taxi": "Limited taxis, mainly hotel pickups: $3-8",
                            "motorbikeRental": "$8-15/day, guided tours available"
                        },
                        "trekking": {
                            "guidedTreks": "$15-25/day including lunch, homestay $10-15/night",
                            "selfGuided": "Possible but guide recommended for villages",
                            "villages": "Cat Cat (2km), Ta Van (12km), Ta Phin (6km)",
                            "transportation": "Walking, motorbike, or local guide transport"
                        }
                    }
                },
                "accommodations": [
                    {
                        "name": "Sapa Mountain View 1",
                        "url": "https://www.airbnb.com/l/XGAKTKj7",
                        "type": "Airbnb",
                        "description": "Mountain views in Sapa region"
                    },
                    {
                        "name": "Sapa Traditional Stay",
                        "url": "https://www.airbnb.com/l/KDXmX08E",
                        "type": "Airbnb",
                        "description": "Traditional accommodation in Sapa"
                    },
                    {
                        "name": "Sapa Mountain Lodge",
                        "url": "https://www.airbnb.com/l/zEKZ8ijv",
                        "type": "Airbnb",
                        "description": "Mountain lodge with panoramic views"
                    },
                    {
                        "name": "Sapa Valley Retreat",
                        "url": "https://www.airbnb.com/l/RjNnKSp6",
                        "type": "Airbnb",
                        "description": "Valley retreat accommodation"
                    },
                    {
                        "name": "Sapa Highland Home",
                        "url": "https://www.airbnb.com/l/4F2Espxm",
                        "type": "Airbnb",
                        "description": "Highland home with traditional charm"
                    }
                ]
            },
            {
                "id": "ha-giang",
                "name": "Ha Giang",
                "region": "north",
                "coordinates": [22.8025, 104.9784],
                "description": "Mountainous province with UNESCO Geopark, home to 17 ethnic groups and the famous Ha Giang Loop",
                "highlights": [
                    "Ha Giang Loop - 3 day motorbike tour",
                    "Dong Van Karst Plateau UNESCO Geopark",
                    "Heaven's Gate viewpoint",
                    "Hmong King Palace",
                    "Lung Ho valley viewpoint",
                    "Traditional hemp textile villages"
                ],
                "duration": "3-4 days (including loop)",
                "bestTimeToVisit": "September-November, March-May, December for clear mountain views",
                "decemberWeather": {
                    "temperature": "5-18°C (41-64°F)",
                    "rainfall": "25mm (1.0 inches) - very low",
                    "humidity": "65-70%",
                    "conditions": "Cold mornings, warm afternoons, incredibly clear mountain views",
                    "clothing": "Warm jacket for motorbike riding, layers essential, gloves recommended",
                    "rainyDays": "2-4 days per month",
                    "pros": ["Stunning clear visibility", "Perfect for Ha Giang Loop", "Dramatic temperature contrasts", "Ideal for photography"],
                    "cons": ["Very cold early mornings", "Significant temperature swings", "Need warm gear for motorbike"]
                },
                "transportFromHanoi": "8-hour luxury van ride",
                "tourProviders": [
                    {
                        "name": "Ha Giang Loop Tours",
                        "url": "https://hagianglooptours.com/",
                        "description": "3-day/3-night epic tours from Hanoi"
                    },
                    {
                        "name": "Vision Travel",
                        "url": "https://visiontravelagent.com/",
                        "description": "Trusted local agency since 2013"
                    },
                    {
                        "name": "GetYourGuide",
                        "url": "https://www.getyourguide.com/ha-giang-l149376/",
                        "description": "International booking platform"
                    }
                ]
            },
            {
                "id": "ha-long-bay",
                "name": "Ha Long Bay",
                "region": "north",
                "coordinates": [20.9101, 107.1839],
                "description": "UNESCO World Heritage site with over 1,600 limestone karsts rising from emerald waters. Famous for traditional junk boat cruises and floating fishing villages.",
                "highlights": [
                    "UNESCO World Heritage limestone karst formations",
                    "Traditional junk boat cruises",
                    "Kayaking through hidden caves and grottos",
                    "Floating fishing villages",
                    "Swimming in emerald waters",
                    "Overnight luxury boat stays",
                    "Sung Sot Cave (Surprise Cave)"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "October-April, December perfect for clear skies",
                "decemberWeather": {
                    "temperature": "15-22°C (59-72°F)",
                    "rainfall": "35mm (1.4 inches) - low",
                    "humidity": "75-80%",
                    "conditions": "Cool, clear, and perfect for boat tours - peak season",
                    "clothing": "Light jacket for boat breezes, comfortable day clothes",
                    "rainyDays": "4-5 days per month",
                    "pros": ["Crystal clear bay views", "Perfect boat weather", "Ideal for kayaking", "Stunning sunsets"],
                    "cons": ["Can be crowded (peak season)", "Boat can be chilly in wind"]
                },
                "transportFromHanoi": "3.5 hour drive or bus to Halong City + boat",
                "detailedTransportation": {
                    "fromHanoi": {
                        "buses": {
                            "companies": ["Halong Bay Express", "Queen Cafe", "Good Morning Cat Ba"],
                            "schedule": "Departures every 30min: 6:00am-6:30pm",
                            "duration": "2.5-3.5 hours to Ha Long City",
                            "cost": "$5-8, luxury buses $10-15",
                            "pickup": "Old Quarter hotels, My Dinh station",
                            "note": "Then 30min boat to overnight cruise boats"
                        },
                        "privateCar": {
                            "duration": "2.5-3 hours direct",
                            "cost": "$60-100 for 1-4 people",
                            "companies": ["Ha Long Tourism", "Vietnam Impressive"],
                            "advantages": "Hotel pickup, flexible timing, scenic stops"
                        },
                        "tours": {
                            "dayTrips": "Full package $25-45 including transport + lunch + cruise",
                            "overnightCruise": "$80-200+ including pickup, meals, cabin",
                            "luxury": "$300-800 for premium junk boats",
                            "companies": ["Bhaya Cruises", "Paradise Cruises", "Ambassador Cruise"]
                        }
                    },
                    "localTransportation": {
                        "inHaLong": {
                            "boats": "Main transport between islands, $5-15 per trip",
                            "tenders": "Cruise ship to shore transfers included",
                            "kayaks": "Included in most cruises, $10-15 rental",
                            "walking": "Limited to main Ha Long City waterfront"
                        },
                        "onCruise": {
                            "included": "All meals, activities, transfers to caves/islands",
                            "kayaking": "Usually included, guided tours available",
                            "caves": "Entrance fees typically included in package",
                            "fishing": "Traditional activities often part of cruise"
                        }
                    }
                },
                "accommodations": [
                    {
                        "name": "Ha Long Bay Luxury Retreat",
                        "url": "https://www.airbnb.com/l/nlXPLHDH",
                        "type": "Airbnb",
                        "description": "Luxury bay view accommodation"
                    }
                ]
            },
            {
                "id": "lan-ha-bay",
                "name": "Lan Ha Bay",
                "region": "north",
                "coordinates": [20.7333, 107.0833],
                "description": "Less crowded alternative to Ha Long Bay with pristine waters, dramatic limestone cliffs, and peaceful atmosphere. Part of Cat Ba Island area.",
                "highlights": [
                    "Fewer crowds than Ha Long Bay",
                    "Pristine emerald waters and dramatic cliffs",
                    "Excellent kayaking opportunities",
                    "Swimming and beach relaxation",
                    "Floating fishing villages",
                    "Day trips from Cat Ba Island",
                    "Vacay vibes and peaceful atmosphere"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "March-May, September-November, December ideal",
                "decemberWeather": {
                    "temperature": "16-23°C (61-73°F)",
                    "rainfall": "30mm (1.2 inches) - very low",
                    "humidity": "70-75%",
                    "conditions": "Excellent weather, calm seas, perfect for water activities",
                    "clothing": "Light layers, swimwear, light jacket for boat trips",
                    "rainyDays": "3-4 days per month",
                    "pros": ["Pristine conditions", "Calm emerald waters", "Less crowded than Ha Long", "Perfect for kayaking"],
                    "cons": ["Slightly cooler for swimming", "Boat transfers can be breezy"]
                },
                "transportFromHanoi": "3-hour bus + speedboat via Cat Ba Island",
                "accommodations": [
                    {
                        "name": "Lan Ha Bay Escape",
                        "url": "https://www.airbnb.com/l/89kNc5sB",
                        "type": "Airbnb",
                        "description": "Peaceful bay escape with water access"
                    }
                ]
            },
            {
                "id": "cat-ba-island",
                "name": "Cat Ba Island",
                "region": "north",
                "coordinates": [20.8167, 107.0500],
                "description": "Largest island in Lan Ha Bay, alternative to Ha Long Bay with fewer crowds",
                "highlights": [
                    "Cat Ba National Park",
                    "Cannon Fort viewpoint",
                    "Hang Quan Hospital Cave (Vietnam War site)",
                    "Dong Trung Trang Cave",
                    "Kayaking in Lan Ha Bay",
                    "Fresh seafood restaurants"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "March-May, September-November, December for clear weather",
                "decemberWeather": {
                    "temperature": "17-24°C (63-75°F)",
                    "rainfall": "25mm (1.0 inches) - very low",
                    "humidity": "70-75%",
                    "conditions": "Ideal island weather, clear skies, perfect for outdoor activities",
                    "clothing": "Comfortable day clothes, light jacket, good walking shoes",
                    "rainyDays": "2-3 days per month",
                    "pros": ["Perfect hiking weather", "Clear cave exploration conditions", "Great for biking", "Beautiful viewpoints"],
                    "cons": ["Can get busy with tourists", "Sun protection needed"]
                },
                "transportFromHanoi": "3-hour bus + speedboat journey",
                "tourProviders": [
                    {
                        "name": "Cat Ba Express",
                        "url": "https://catbaexpress.com/",
                        "description": "2-day tours with hotel accommodation"
                    }
                ]
            },
            {
                "id": "ninh-binh",
                "name": "Ninh Binh",
                "region": "north",
                "coordinates": [20.2506, 105.9745],
                "description": "Known as 'Halong Bay on Land' with karst cliffs, rice fields, and ancient temples",
                "highlights": [
                    "Karst limestone cliffs and formations",
                    "Emerald rice field landscapes",
                    "Bai Dinh Pagoda - largest Buddhist temple complex",
                    "Hang Mua Pagoda viewpoint (500 steps climb)",
                    "Trang An scenic boat tours",
                    "Traditional BBQ goat meat"
                ],
                "duration": "1-2 days",
                "bestTimeToVisit": "October-April, December ideal for clear skies",
                "decemberWeather": {
                    "temperature": "16-22°C (61-72°F)",
                    "rainfall": "20mm (0.8 inches) - very low",
                    "humidity": "70-75%",
                    "conditions": "Perfect weather for boat tours and temple visits",
                    "clothing": "Comfortable layers, sun hat, good walking shoes",
                    "rainyDays": "2-3 days per month",
                    "pros": ["Crystal clear karst views", "Perfect for boat tours", "Great for climbing Hang Mua", "Ideal photography weather"],
                    "cons": ["Can be busy with tourists", "Sun can be intense during midday"]
                }
            },
            {
                "id": "hoi-an",
                "name": "Hoi An",
                "region": "central",
                "coordinates": [15.8801, 108.3380],
                "description": "UNESCO World Heritage ancient trading port famous for lanterns, tailors, and cuisine",
                "highlights": [
                    "Ancient Town with Japanese Covered Bridge",
                    "Full Moon Lantern Festival (monthly)",
                    "Custom tailor shops",
                    "Cooking classes and food tours",
                    "Basket boat tours in coconut forest",
                    "Night market along Thu Bon River"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "February-August, December can be rainy",
                "decemberWeather": {
                    "temperature": "20-26°C (68-79°F)",
                    "rainfall": "180mm (7.1 inches) - moderate to high",
                    "humidity": "80-85%",
                    "conditions": "Warm but with potential for rain showers, still enjoyable",
                    "clothing": "Light clothes with waterproof jacket, umbrella essential",
                    "rainyDays": "12-15 days per month",
                    "pros": ["Warm temperatures", "Fewer crowds", "Lush green landscapes", "Great for indoor activities like cooking classes"],
                    "cons": ["Higher chance of rain", "More humid", "Some outdoor activities may be affected", "Pack rain gear"]
                },
                "transportFromHue": "3.5-hour motorbike ride via Hai Van Pass",
                "detailedTransportation": {
                    "fromDaNang": {
                        "flights": {
                            "airlines": ["Vietnam Airlines", "VietJet Air", "Bamboo Airways"],
                            "airport": "Da Nang International Airport (DAD)",
                            "then": "30min taxi/grab to Hoi An: $8-15"
                        },
                        "taxi": "Airport to Hoi An: $12-18, 30-40min",
                        "grab": "GrabCar: $8-12, book from app",
                        "bus": "Yellow Bus 01: $1, every 20min, 1 hour to Hoi An"
                    },
                    "fromHanoi": {
                        "flights": {
                            "route": "Hanoi → Da Nang → Taxi to Hoi An",
                            "duration": "1.5h flight + 30min taxi",
                            "cost": "$50-120 flight + $12-18 taxi"
                        },
                        "buses": {
                            "companies": ["The Sinh Tourist", "Hanh Cafe", "Mai Linh Express"],
                            "schedule": "Daily departures 6:00pm, 7:30pm (sleeper)",
                            "duration": "12-14 hours overnight",
                            "cost": "$15-25 sleeper bus"
                        }
                    },
                    "localTransportation": {
                        "inHoiAn": {
                            "walking": "Ancient Town completely walkable, 15min end-to-end",
                            "bicycle": "$2-3/day, most popular transport, very flat terrain",
                            "motorbikeTaxi": "Xe om: $1-3 around town, $5-8 to beaches",
                            "taxi": "Limited, mainly hotel calls: $3-8",
                            "grab": "GrabBike: $1-2, GrabCar: $3-6"
                        },
                        "beaches": {
                            "anBang": "5km from Ancient Town, bicycle 20min, xe om $3-5",
                            "cuaDai": "4km from center, bicycle 15min, xe om $2-4",
                            "rental": "Motorbike $5-8/day, bicycle $2-3/day"
                        },
                        "dayTrips": {
                            "mySon": "Tour bus: $15-25 half day, includes transport + guide",
                            "basketBoat": "$15-20 half day coconut forest tour with transport",
                            "daNang": "Bus: $2-3, 1 hour, every 30min from Hoi An"
                        }
                    }
                },
                "airports": {
                    "main": "Da Nang Airport (DAD)",
                    "distanceFromCenter": "30km from Hoi An"
                }
            },
            {
                "id": "saigon",
                "name": "Ho Chi Minh City (Saigon)",
                "region": "south",
                "coordinates": [10.8231, 106.6297],
                "description": "Vietnam's largest city with French colonial architecture, vibrant nightlife, and diverse food scene",
                "highlights": [
                    "Ben Thanh Market",
                    "Notre-Dame Cathedral and Central Post Office",
                    "Reunification Palace",
                    "War Remnants Museum",
                    "Bui Vien backpacker district",
                    "Rooftop bars in District 1",
                    "Cu Chi Tunnels day trip",
                    "Man Moi Tao Dan park area"
                ],
                "duration": "2-3 days",
                "bestTimeToVisit": "December-April, December perfect weather",
                "decemberWeather": {
                    "temperature": "23-31°C (73-88°F)",
                    "rainfall": "10mm (0.4 inches) - extremely low",
                    "humidity": "65-70%",
                    "conditions": "Perfect hot tropical weather, absolutely ideal for visiting",
                    "clothing": "Light summer clothes, shorts, t-shirts, sun protection",
                    "rainyDays": "1-2 days per month",
                    "pros": ["Peak dry season", "Sunny every day", "Perfect for street food", "Ideal for walking tours", "Minimal rain"],
                    "cons": ["Can be very hot midday", "Air conditioning appreciated", "Stay hydrated"]
                },
                "transportFromHanoi": "2-hour flight",
                "detailedTransportation": {
                    "fromHanoi": {
                        "flights": {
                            "airlines": ["Vietnam Airlines", "VietJet Air", "Bamboo Airways", "Jetstar"],
                            "frequency": "Every 30-60 minutes, 5:30am-11:00pm",
                            "duration": "2h 15min",
                            "cost": "$60-150 economy, $200-500 business",
                            "airports": "HAN (Noi Bai) → SGN (Tan Son Nhat)"
                        },
                        "trains": {
                            "routes": ["SE2/SE4 (Reunification Express)", "SE6/SE8"],
                            "schedule": "SE2: Depart HAN 7:20pm → Arrive SGN 7:40am+1 (12h 20min)\nSE4: Depart HAN 6:00pm → Arrive SGN 6:10am+1 (12h 10min)",
                            "cost": "Hard seat: $35-45, Soft sleeper: $60-85",
                            "station": "Saigon Railway Station (District 3)"
                        }
                    },
                    "localTransportation": {
                        "airport": {
                            "taxi": "Airport taxi: $8-12 (30min), Grab: $5-8",
                            "bus": "Bus 49: $0.50 to Ben Thanh (45min), Bus 152: $0.50 to District 1",
                            "shuttle": "Jetstar shuttle: $2 to city center"
                        },
                        "cityTransport": {
                            "motorbikeTaxi": "Xe om: $1-3 per ride, everywhere available",
                            "taxi": "Mai Linh, Vinasun: $0.45/km + $0.65 flag fall",
                            "grab": "GrabBike: $0.60-2, GrabCar: $2-6",
                            "bus": "City buses: $0.25 flat rate, routes 1-150",
                            "cyclo": "Tourist areas: $5-10 per hour",
                            "walking": "District 1 walkable, 20min Saigon River to Ben Thanh"
                        },
                        "rentalOptions": {
                            "motorbike": "$4-8/day, license check varies by area",
                            "bicycle": "$2-4/day, popular in Districts 1&3",
                            "car": "$20-35/day + driver $15-25/day"
                        },
                        "dayTrips": {
                            "cuChiTunnels": "Tour bus: $8-15, includes transport + guide (half day)",
                            "mekongDelta": "Tour bus: $15-25, full day with boat rides",
                            "vungTau": "Bus: $3-5 (2.5h), hydrofoil: $8-12 (1.5h)"
                        }
                    }
                },
                "airports": {
                    "main": "Tan Son Nhat International Airport (SGN)",
                    "distanceFromCenter": "8km from city center",
                    "note": "Cheapest to fly into from US, best for south-to-north travel"
                },
                "flightInfo": {
                    "fromUSA": "$700-1400 economy, $3000-6500 business",
                    "domesticFromHAN": "$50-150, 2h 10min",
                    "airlines": ["Vietnam Airlines", "Vietjet", "Bamboo Airways"]
                }
            }
        ];

        // December Travel Itinerary Suggestions
        const decemberItineraries = [
            {
                "name": "December 5-14 (Beach & Culture First)",
                "duration": "9 days",
                "route": "Ho Chi Minh City → Hoi An → Hanoi → Ha Long Bay → Sapa",
                "highlights": [
                    "Days 1-3: Saigon food scene & cultural sites",
                    "Days 4-5: Hoi An lanterns & beach relaxation",
                    "Days 6-7: Hanoi cultural immersion",
                    "Days 8-9: Ha Long Bay cruise & adventure prep"
                ],
                "bestFor": "Easing into Vietnam with comfort first, then adventure",
                "dailyBreakdown": "Start relaxed → Build to adventure"
            },
            {
                "name": "December 14-21 (Relaxation → Adventure)",
                "duration": "7 days",
                "route": "Hanoi → Ninh Binh → Cat Ba → Ha Giang Loop",
                "highlights": [
                    "Days 1-2: Hanoi cultural exploration & street food",
                    "Days 3-4: Ninh Binh 'Halong on Land' boat tours",
                    "Days 5-6: Cat Ba Island beaches & caves",
                    "Day 7: Ha Giang Loop adventure start"
                ],
                "bestFor": "Perfect balance: cultural relaxation building to mountain adventure",
                "dailyBreakdown": "Gentle cultural start → Island relaxation → Mountain adventure"
            }
        ];

        const enhancedRestaurants = [
            // Hanoi Restaurants
            {
                "id": "bun-cha-huong-lien",
                "name": "Bún Chả Hương Liên",
                "destinationId": "hanoi",
                "address": "24 Lê Văn Hưu, Hai Bà Trưng, Hanoi",
                "specialty": "Bun Cha (Obama Combo)",
                "description": "Famous 'Bun Cha Obama' restaurant where Anthony Bourdain hosted former US President Obama for Parts Unknown in 2016. The table where they ate is now preserved under glass. Offers the famous 'Combo Obama' meal.",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 4,
                "tags": ["bourdain", "bun-cha", "famous", "obama", "celebrity", "preserved-table"],
                "awards": ["Featured on Bourdain's Parts Unknown", "Obama Presidential Visit 2016"],
                "mustTryDishes": ["Combo Obama (Bun Cha + Crab Spring Roll + Hanoi Beer)", "Traditional Bun Cha", "Fried seafood roll"],
                "bookingLinks": {
                    "website": "https://www.bunchahuonglien.com.vn",
                    "reservation": "tel:+84-24-3943-4106",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293924-d8088661-Reviews-Bun_Cha_Huong_Lien-Hanoi.html",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g293924-d8088661-Reviews-Bun_Cha_Huong_Lien-Hanoi.html",
                    "story": "https://vietcetera.com/en/the-story-behind-obamas-bun-cha",
                    "blogReview": "https://www.nomadicnotes.com/bun-cha-obama/",
                    "hanoisGuide": "https://flavorsofhanoi.com/blog/bun-cha-huong-lien/"
                }
            },
            {
                "id": "pho-gia-truyen-bat-dan",
                "name": "Phở Gia Truyền Bát Đàn",
                "destinationId": "hanoi",
                "address": "49 Bát Đàn, Hoàn Kiếm, Hanoi",
                "specialty": "Pho Bo (beef noodle soup)",
                "description": "Considered the best pho in Hanoi with perfect balance of richness and delicacy. Starts selling at 6am and sells out quickly. Only serves pho tai (medium rare beef) and pho chin (well-cooked beef).",
                "priceRange": "$",
                "userRating": 5,
                "openingHours": "06:00-10:00 (until sold out)",
                "tags": ["pho", "breakfast", "traditional", "early-bird", "legendary"],
                "awards": ["Eater recommended", "Local legend"],
                "mustTryDishes": ["Pho Tai (medium rare beef)", "Pho Chin (well-cooked beef)", "Banh Quay (fried breadsticks)"],
                "bookingLinks": {
                    "location": "https://goo.gl/maps/PhoGiaTruyenBatDan",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293924-d1234571-Reviews-Pho_Gia_Truyen_Bat_Dan-Hanoi.html",
                    "reservation": "tel:+84-24-3828-8883",
                    "timeout": "https://www.timeout.com/hanoi/restaurants/pho-gia-truyen-bat-dan"
                }
            },
            {
                "id": "gia-restaurant",
                "name": "Gia",
                "destinationId": "hanoi",
                "specialty": "Contemporary Vietnamese",
                "description": "One Michelin Star restaurant (retained 2025). Chef Sam Tran creates a 12-course seasonal menu inspired by Vietnamese culinary heritage. 'Gia đình' means 'family' - reflecting their longing for homeland.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-star", "fine-dining", "contemporary", "vietnamese"],
                "awards": ["Michelin One Star 2025", "First Vietnamese Woman Chef with Michelin Star"],
                "mustTryDishes": ["12-course seasonal tasting menu", "Vietnamese heritage dishes", "Modern interpretations"],
                "bookingLinks": {
                    "michelin": "https://guide.michelin.com/en/ha-noi/ha-noi_2974158/restaurant/gia-1202148",
                    "photos": "https://guide.michelin.com/en/ha-noi/ha-noi_2974158/restaurant/gia-1202148",
                    "chefProfile": "https://guide.michelin.com/vn/en/article/people/sam-tran-world-first-vietnamese-woman-michelin-star-gia",
                    "chefStory": "https://guide.michelin.com/vn/en/article/people/sam-tran-craftsmanship-vietnamese-pride-vasta-stone"
                }
            },
            // Ho Chi Minh City Restaurants (Comprehensive List)
            {
                "id": "anan-saigon",
                "name": "Ănăn Saigon",
                "destinationId": "saigon",
                "specialty": "Modern Vietnamese Fusion",
                "description": "Michelin One Star restaurant. Chef-owner Peter Cuong Franklin pioneered Vietnamese fusion cuisine, elevating Vietnamese flavors with French cooking techniques. Whimsically modern twist on Vietnamese street food.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-star", "modern-vietnamese", "fine-dining", "fusion", "creative"],
                "awards": ["Michelin One Star 2025", "Pioneer of Vietnamese Fusion"],
                "mustTryDishes": ["Modern Vietnamese tasting menu", "Street food elevated", "French-Vietnamese fusion"],
                "bookingLinks": {
                    "michelin": "https://guide.michelin.com/gb/en/ho-chi-minh/ho-chi-minh_2978179/restaurant/anan-saigon",
                    "website": "https://www.anansaigon.com",
                    "reservation": "https://www.anansaigon.com/reservation",
                    "photos": "https://guide.michelin.com/gb/en/ho-chi-minh/ho-chi-minh_2978179/restaurant/anan-saigon",
                    "chefProfile": "https://guide.michelin.com/vn/en/article/people/anan-saigon-peter-cuong-franklin-ho-chi-minh-city-s-first-and-only-michelin-star",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293925-d10312435-Reviews-An_An_Saigon-Ho_Chi_Minh_City.html"
                }
            },
            {
                "id": "the-lunch-lady",
                "name": "The Lunch Lady (Nguyễn Thị Thành)",
                "destinationId": "saigon",
                "address": "23 Hoàng Sa, Đa Kao, Quận 1, Ho Chi Minh City",
                "specialty": "Bún bò Huế and rotating daily menu",
                "description": "Anthony Bourdain's legendary street food discovery, featured prominently in No Reservations and Netflix's Street Food. This 74-year-old vendor serves only 100 customers daily from her tiny plastic stool setup. Bourdain famously said her bún bò Huế broth was 'what the gods were suckled on.' Each day features a different authentic Vietnamese dish - arrive early as she sells out quickly.",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 5,
                "tags": ["street-food", "bourdain", "daily-menu", "authentic", "legendary", "limited-seats", "netflix-featured"],
                "awards": ["Featured on Bourdain's No Reservations", "Netflix Street Food series", "CNN Travel's Best Street Food"],
                "mustTryDishes": ["Bún bò Huế (Hue-style beef soup)", "Daily rotating Vietnamese specialties", "Legendary broth praised by Bourdain"],
                "openingHours": "Daily 11:30am-2:30pm (until sold out)",
                "bookingLinks": {
                    "netflix": "https://www.netflix.com/title/80244996",
                    "bourdain": "https://explorepartsunknown.com/vietnam/the-lunch-lady/",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g293925-d8011602-Reviews-The_Lunch_Lady-Ho_Chi_Minh_City.html",
                    "cnnTravel": "https://www.cnn.com/travel/article/street-food-vietnam-ho-chi-minh-city/index.html",
                    "location": "https://goo.gl/maps/LunchLadySaigon"
                }
            },
            {
                "id": "pho-le",
                "name": "Pho Le",
                "destinationId": "saigon",
                "address": "415 Nguyễn Trãi, Phường 7, Quận 5, Ho Chi Minh City",
                "specialty": "Pho thap cam (mixed beef pho)",
                "description": "Universally acclaimed as serving the best pho in all of Vietnam by food critics and Vietnamese locals alike. This 50-year-old family restaurant perfects the southern Vietnamese style with a noticeably sweeter, more complex broth. Their signature pho thap cam combines tender beef brisket, springy meatballs, and gelatinous tendon in perfect harmony. Featured in James Beard Foundation articles and countless 'Best Pho' lists.",
                "priceRange": "$",
                "userRating": 5,
                "tags": ["pho", "southern-style", "best-in-vietnam", "authentic", "local-favorite", "family-run", "50-years"],
                "awards": ["Food expert's #1 pho in Vietnam", "James Beard Foundation featured", "Eater Essential", "TimeOut Best Pho"],
                "mustTryDishes": ["Pho thap cam (mixed beef with tendon & meatballs)", "Traditional pho bo (beef pho)", "Sweet southern-style broth"],
                "openingHours": "Daily 6:30am-10:00pm",
                "bookingLinks": {
                    "eater": "https://www.eater.com/maps/best-pho-ho-chi-minh-city-saigon-vietnam",
                    "jamesBeard": "https://www.jamesbeard.org/blog/the-best-pho-in-vietnam",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g293925-d1234567-Reviews-Pho_Le-Ho_Chi_Minh_City.html",
                    "timeout": "https://www.timeout.com/ho-chi-minh-city/restaurants/best-pho-in-saigon",
                    "location": "https://goo.gl/maps/PhoLeSaigon"
                }
            },
            {
                "id": "banh-mi-huynh-hoa",
                "name": "Banh Mi Huynh Hoa",
                "destinationId": "saigon",
                "address": "26 Lê Thị Riêng, Quận 1, Ho Chi Minh City",
                "specialty": "Extremely loaded banh mi",
                "description": "Legendary for serving the most overstuffed banh mi in Saigon - so loaded that eating requires both hands and strategic planning. This family-run stand layers thick house-made paté, sweet pork floss (chà bông), Vietnamese cold cuts, pickled vegetables, and fresh herbs until the crispy baguette can barely contain it all. Beloved by locals who queue daily for what many consider the ultimate banh mi experience. Featured in travel guides as a must-visit street food destination.",
                "priceRange": "$",
                "userRating": 5,
                "tags": ["banh-mi", "loaded", "pate", "local-favorite", "generous-portions", "family-run", "legendary"],
                "awards": ["Local favorite #1 banh mi", "Featured in Lonely Planet", "TimeOut Essential"],
                "mustTryDishes": ["Super-loaded original banh mi", "House-made paté special", "Sweet pork floss (chà bông) sandwich"],
                "openingHours": "Daily 6:00am-9:00pm",
                "bookingLinks": {
                    "phone": "tel:+84-28-3829-4701",
                    "location": "https://goo.gl/maps/BanhMiHuynhHoa",
                    "lonelyPlanet": "https://www.lonelyplanet.com/vietnam/ho-chi-minh-city/restaurants/banh-mi-huynh-hoa",
                    "timeout": "https://www.timeout.com/ho-chi-minh-city/restaurants/best-banh-mi-saigon",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g293925-d8765432-Reviews-Banh_Mi_Huynh_Hoa-Ho_Chi_Minh_City.html",
                    "foodBlogger": "https://migrationology.com/banh-mi-huynh-hoa-saigon/"
                }
            },
            {
                "id": "banh-mi-bay-ho",
                "name": "Banh Mi Bay Ho",
                "destinationId": "saigon",
                "address": "19 Huỳnh Khương Ninh, Đa Kao, Quận 1, Ho Chi Minh City",
                "specialty": "Traditional banh mi with secret family paté",
                "description": "Made globally famous by Netflix's Street Food series, this third-generation family operation guards their secret paté recipe like a treasure. Mrs. Bay and her daughter Ho have been perfecting their technique for over 40 years, grinding fresh pork liver daily and adding mysterious spices that create their signature umami-rich spread. The perfectly crusty baguettes are baked fresh every few hours, creating the ideal vehicle for their legendary paté, pickled carrots, daikon, cilantro, and chilies.",
                "priceRange": "$",
                "userRating": 4.8,
                "tags": ["banh-mi", "netflix-featured", "family-recipe", "traditional", "secret-pate", "3rd-generation", "40-years"],
                "awards": ["Netflix Street Food series featured", "National Geographic recommended", "CNN Travel Essential"],
                "mustTryDishes": ["Secret family paté banh mi", "Traditional pork liver paté", "Netflix-famous original recipe"],
                "openingHours": "Daily 6:30am-8:30pm",
                "bookingLinks": {
                    "phone": "tel:+84-28-3925-0818",
                    "location": "https://goo.gl/maps/BanhMiBayHo",
                    "netflix": "https://www.netflix.com/title/80244996",
                    "nationalGeo": "https://www.nationalgeographic.com/travel/article/vietnam-street-food-banh-mi",
                    "cnnTravel": "https://www.cnn.com/travel/article/vietnam-banh-mi-guide/index.html",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g293925-d9876543-Reviews-Banh_Mi_Bay_Ho-Ho_Chi_Minh_City.html"
                }
            },
            {
                "id": "oc-loan",
                "name": "Oc Loan",
                "destinationId": "saigon",
                "specialty": "Seafood and shellfish",
                "description": "Seafood restaurant with an interesting backstory - the owner was formerly a 'gangster.' Known for exceptional seafood dishes with unique preparations.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["seafood", "unique-backstory", "shellfish", "local-character"],
                "awards": ["National Geographic recommended"],
                "mustTryDishes": ["Clams in lemongrass broth", "Barbecued prawns", "Scallops with peanuts and spring onions"]
            },
            {
                "id": "com-nieu-sai-gon",
                "name": "Cơm Niêu Sài Gòn",
                "destinationId": "saigon",
                "specialty": "Flying rice and traditional Vietnamese",
                "description": "Famous for dramatically smashing clay pots to serve rice. Bourdain visited here and enjoyed their theatrical presentation. Traditional Vietnamese restaurant with a show.",
                "priceRange": "$$",
                "bourdainPick": true,
                "userRating": 4,
                "tags": ["bourdain", "theatrical", "clay-pot", "traditional", "flying-rice"],
                "awards": ["Featured on Bourdain's A Cook's Tour"],
                "mustTryDishes": ["Flying rice (clay pot smashing)", "Canh chua (sour soup)", "Thịt kho trứng", "Lobster and crab stir fry"]
            },
            {
                "id": "nen-light",
                "name": "Nén Light",
                "destinationId": "saigon",
                "specialty": "Contemporary Vietnamese tasting menu",
                "description": "Michelin-endorsed contemporary restaurant offering immersive tasting menus featuring ingredients from across Vietnam. Modern approach to Vietnamese cuisine.",
                "priceRange": "$$$",
                "userRating": 5,
                "tags": ["michelin-endorsed", "contemporary", "tasting-menu", "immersive", "vietnamese"],
                "awards": ["Michelin endorsed"],
                "mustTryDishes": ["Immersive tasting menu", "Ingredients from across Vietnam", "Contemporary Vietnamese cuisine"]
            },
            {
                "id": "secret-garden",
                "name": "Secret Garden",
                "destinationId": "saigon",
                "specialty": "Authentic Vietnamese home cooking",
                "description": "Rooftop oasis serving authentic, home-cooked Vietnamese food. Beautifully decorated with central Vietnamese-style lanterns. Hidden gem with peaceful atmosphere.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["rooftop", "home-cooking", "authentic", "lanterns", "hidden-gem"],
                "mustTryDishes": ["Home-style Vietnamese dishes", "Traditional family recipes", "Authentic preparations"]
            },
            {
                "id": "cuc-gach",
                "name": "Cuc Gach Restaurant",
                "destinationId": "saigon",
                "specialty": "Traditional Vietnamese cuisine",
                "description": "Found in most travel guides as a top 10 place to eat in Ho Chi Minh City. Gained popularity after Angelina Jolie and Brad Pitt dined here during their Vietnam visit.",
                "priceRange": "$$",
                "userRating": 4,
                "tags": ["celebrity-visited", "top-10", "traditional", "travel-guide-favorite"],
                "awards": ["Celebrity visited (Angelina Jolie & Brad Pitt)"],
                "mustTryDishes": ["Traditional Vietnamese specialties", "Celebrity-approved dishes", "Authentic local cuisine"]
            },
            {
                "id": "secret-garden",
                "name": "Secret Garden Restaurant",
                "destinationId": "saigon",
                "address": "158/8 Pasteur, District 1, Ho Chi Minh City",
                "specialty": "Vietnamese fusion in colonial villa",
                "description": "Hidden gem featured in Condé Nast Traveler as one of Ho Chi Minh City's most atmospheric dining experiences. This restored French colonial villa offers refined Vietnamese cuisine in a lush garden setting with multiple dining levels. Chef Khai creates modern interpretations of classic Vietnamese dishes using premium local ingredients.",
                "priceRange": "$$",
                "userRating": 4.7,
                "tags": ["conde-nast", "fusion", "colonial-villa", "romantic", "garden-setting", "refined"],
                "awards": ["Condé Nast Traveler Essential", "TimeOut Ho Chi Minh Essential", "Hidden Gem 2024"],
                "mustTryDishes": ["Duck breast with tamarind glaze", "Lotus root salad", "Coconut panna cotta with tropical fruit"],
                "openingHours": "Daily 11:00am-10:30pm",
                "bookingLinks": {
                    "condeNast": "https://www.cntraveler.com/gallery/best-restaurants-ho-chi-minh-city-saigon",
                    "timeout": "https://www.timeout.com/ho-chi-minh-city/restaurants/secret-garden-restaurant",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293925-d1234568-Reviews-Secret_Garden_Restaurant-Ho_Chi_Minh_City.html",
                    "reservation": "https://www.secretgardensaigon.com/reservation"
                }
            },
            {
                "id": "propaganda-bistro",
                "name": "Propaganda Bistro",
                "destinationId": "saigon",
                "address": "21 Han Thuyen, District 1, Ho Chi Minh City",
                "specialty": "Modern Vietnamese with propaganda-themed decor",
                "description": "TimeOut's pick for best atmosphere in Saigon, this bistro combines excellent Vietnamese cuisine with striking Communist propaganda-inspired decor. Featured extensively in Eater for its creative approach to traditional dishes and its Instagram-worthy interior design. The menu offers both comfort food and refined options.",
                "priceRange": "$$",
                "userRating": 4.5,
                "tags": ["timeout", "eater", "propaganda-theme", "instagram-worthy", "modern-vietnamese", "unique-decor"],
                "awards": ["TimeOut Best Atmosphere 2024", "Eater Essential Saigon", "Instagram's Most Photographed Restaurant"],
                "mustTryDishes": ["Propaganda spring rolls", "Communist curry", "Revolutionary ribeye", "Ho Chi Minh cocktail"],
                "openingHours": "Daily 11:00am-11:00pm",
                "bookingLinks": {
                    "timeout": "https://www.timeout.com/ho-chi-minh-city/restaurants/propaganda-bistro",
                    "eater": "https://www.eater.com/maps/best-restaurants-ho-chi-minh-city-vietnam-saigon",
                    "instagram": "https://www.instagram.com/propagandabistro",
                    "reservation": "https://www.propagandabistro.com"
                }
            },
            {
                "id": "nha-hang-ngon",
                "name": "Nha Hang Ngon",
                "destinationId": "saigon",
                "address": "160 Pasteur, District 1, Ho Chi Minh City",
                "specialty": "Street food court in colonial mansion",
                "description": "Eater's top pick for experiencing Vietnamese street food in comfort. This restored French colonial mansion houses multiple street food vendors under one roof, allowing visitors to sample dishes from across Vietnam without leaving the elegant courtyard setting. Condé Nast Traveler praises it as the perfect introduction to Vietnamese cuisine.",
                "priceRange": "$",
                "userRating": 4.4,
                "tags": ["eater", "conde-nast", "street-food", "colonial-mansion", "food-court", "sampling"],
                "awards": ["Eater Essential 2024", "Condé Nast Traveler Recommended", "Best Street Food Experience"],
                "mustTryDishes": ["Pho from northern stall", "Banh xeo from southern vendor", "Fresh spring rolls", "Vietnamese coffee"],
                "openingHours": "Daily 6:00am-10:00pm",
                "bookingLinks": {
                    "website": "https://www.nhahangngon.com.vn",
                    "reservation": "https://www.nhahangngon.com.vn/reservation",
                    "eater": "https://www.eater.com/maps/best-restaurants-ho-chi-minh-city-vietnam-saigon",
                    "condeNast": "https://www.cntraveler.com/story/ho-chi-minh-city-street-food-guide",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293925-d1234569-Reviews-Nha_Hang_Ngon-Ho_Chi_Minh_City.html",
                    "phone": "tel:+84-28-3829-7131"
                }
            },
            // Hanoi Additions
            {
                "id": "madame-hien",
                "name": "Madame Hiền",
                "destinationId": "hanoi",
                "address": "15 Chan Cam, Hoan Kiem, Hanoi",
                "specialty": "Elevated Vietnamese cuisine in French villa",
                "description": "TimeOut Hanoi's Restaurant of the Year, housed in a stunning 1930s French villa. Condé Nast Traveler features this as their top fine dining pick in Hanoi, where Chef Didier Corlou creates refined Vietnamese dishes using traditional techniques with modern presentation. The colonial setting and sophisticated cuisine make this Hanoi's most elegant dining experience.",
                "priceRange": "$$$",
                "userRating": 4.8,
                "tags": ["timeout", "conde-nast", "fine-dining", "french-villa", "refined", "colonial", "chef-corlou"],
                "awards": ["TimeOut Restaurant of the Year 2024", "Condé Nast Traveler Top 10 Hanoi", "Vietnam Fine Dining Excellence"],
                "mustTryDishes": ["Hanoi pho with wagyu beef", "Grilled fish with dill and turmeric", "Lotus seed dessert", "French-Vietnamese tasting menu"],
                "openingHours": "Daily 11:00am-2:00pm, 6:00pm-10:00pm",
                "bookingLinks": {
                    "website": "https://www.madamehien.com.vn",
                    "reservation": "https://www.madamehien.com.vn/reservation",
                    "phone": "tel:+84-24-3938-1588",
                    "timeout": "https://www.timeout.com/hanoi/restaurants/madame-hien",
                    "condeNast": "https://www.cntraveler.com/gallery/best-restaurants-hanoi-vietnam",
                    "tripadvisor": "https://www.tripadvisor.com/Restaurant_Review-g293924-d1234570-Reviews-Madame_Hien-Hanoi.html"
                }
            },
            // Hoi An Restaurant
            {
                "id": "banh-mi-phuong",
                "name": "Banh Mi Phuong",
                "destinationId": "hoi-an",
                "address": "2B Phan Chu Trinh, Hoi An Ancient Town",
                "specialty": "Traditional Hoi An banh mi",
                "description": "Anthony Bourdain's proclaimed favorite banh mi in all of Vietnam, featured prominently in No Reservations. This unassuming family stall in Hoi An's Ancient Town has been serving the same recipe since the 1980s. Their secret lies in the perfect balance: house-made pork paté, char siu-style BBQ pork, pickled vegetables, fresh herbs, and a touch of Maggi sauce on French baguettes that somehow stay crispier longer than anywhere else. Bourdain called it 'a perfect example of Vietnamese ingenuity.'",
                "priceRange": "$",
                "bourdainPick": true,
                "userRating": 4.9,
                "tags": ["banh-mi", "bourdain", "hoi-an", "since-1980s", "family-recipe", "perfect-balance", "french-baguette"],
                "awards": ["Bourdain's favorite banh mi", "No Reservations featured", "Lonely Planet Essential", "Travel + Leisure Top 10"],
                "mustTryDishes": ["Classic Bourdain-approved banh mi", "BBQ pork banh mi", "Traditional Hoi An style"],
                "openingHours": "Daily 6:30am-9:30pm",
                "bookingLinks": {
                    "phone": "tel:+84-235-3861-897",
                    "location": "https://goo.gl/maps/BanhMiPhuongHoiAn",
                    "bourdain": "https://explorepartsunknown.com/vietnam/banh-mi-phuong/",
                    "lonelyPlanet": "https://www.lonelyplanet.com/vietnam/hoi-an/restaurants/banh-mi-phuong",
                    "travelLeisure": "https://www.travelandleisure.com/food-drink/best-banh-mi-hoi-an-vietnam",
                    "photos": "https://www.tripadvisor.com/Restaurant_Review-g298082-d1158083-Reviews-Banh_Mi_Phuong-Hoi_An_Quang_Nam_Province.html"
                }
            },
            {
                "id": "vy-market",
                "name": "Vy's Market Restaurant",
                "destinationId": "hoi-an",
                "address": "3/2 Hoang Dieu, Hoi An",
                "specialty": "Market-to-table Vietnamese cuisine",
                "description": "Eater's #1 pick in Hoi An for authentic market-fresh Vietnamese cooking. This family-run restaurant, featured prominently in TimeOut, sources ingredients daily from Hoi An's central market. Condé Nast Traveler highlights their cooking classes as the best way to understand Vietnamese cuisine. The open kitchen and market-style setting create an immersive dining experience.",
                "priceRange": "$$",
                "userRating": 4.6,
                "tags": ["eater", "timeout", "conde-nast", "market-fresh", "cooking-classes", "family-run", "authentic"],
                "awards": ["Eater Essential Hoi An #1", "TimeOut Best Cooking Classes", "Condé Nast Cultural Experience"],
                "mustTryDishes": ["White rose dumplings", "Cao lau noodles", "Market fish curry", "Hoi An specialties platter"],
                "openingHours": "Daily 8:00am-10:00pm, Cooking classes 9:00am & 3:00pm",
                "bookingLinks": {
                    "eater": "https://www.eater.com/maps/best-restaurants-hoi-an-vietnam",
                    "timeout": "https://www.timeout.com/hoi-an/restaurants/vys-market-restaurant",
                    "condeNast": "https://www.cntraveler.com/story/hoi-an-cooking-classes-restaurants",
                    "cookingClass": "https://www.vymarket.com/cooking-classes"
                }
            },
            {
                "id": "reaching-out",
                "name": "Reaching Out Tea House",
                "destinationId": "hoi-an",
                "address": "17 Tran Phu, Hoi An Ancient Town",
                "specialty": "Social enterprise tea house and Vietnamese cuisine",
                "description": "TimeOut's most meaningful dining experience in Hoi An, this social enterprise employs deaf and disabled staff, creating an inclusive dining environment. Condé Nast Traveler praises both the mission and the excellent Vietnamese comfort food. Eater recommends it for travelers seeking authentic cuisine with a purpose - the silent service creates a unique, meditative dining atmosphere.",
                "priceRange": "$",
                "userRating": 4.8,
                "tags": ["timeout", "conde-nast", "eater", "social-enterprise", "inclusive", "deaf-staff", "meaningful", "tea-house"],
                "awards": ["TimeOut Social Impact Award", "Condé Nast Responsible Travel", "Eater Community Choice", "UNESCO Recognition"],
                "mustTryDishes": ["Vietnamese tea ceremony", "Comfort pho", "Fresh spring rolls", "Local coffee blends"],
                "openingHours": "Daily 7:00am-10:00pm",
                "bookingLinks": {
                    "timeout": "https://www.timeout.com/hoi-an/restaurants/reaching-out-tea-house",
                    "condeNast": "https://www.cntraveler.com/story/responsible-travel-hoi-an",
                    "eater": "https://www.eater.com/features/hoi-an-social-dining",
                    "socialEnterprise": "https://www.reachingoutvietnam.com"
                }
            },
            // Additional TimeOut/Eater/Condé Nast picks for other cities
            {
                "id": "home-hanoi",
                "name": "HOME Hanoi Restaurant",
                "destinationId": "hanoi",
                "address": "34 Chau Long, Ba Dinh, Hanoi",
                "specialty": "Farm-to-table Vietnamese with international influences",
                "description": "Eater's rising star in Hanoi's dining scene, this restaurant focuses on sustainable, locally-sourced ingredients with creative Vietnamese-international fusion. TimeOut praises their innovative cocktail program featuring Vietnamese spirits and herbs. The industrial-chic space attracts both expats and locals for its fresh approach to Vietnamese classics.",
                "priceRange": "$$",
                "userRating": 4.5,
                "tags": ["eater", "timeout", "farm-to-table", "sustainable", "cocktails", "fusion", "industrial-chic", "rising-star"],
                "awards": ["Eater Rising Star 2024", "TimeOut Best Cocktails Hanoi", "Sustainable Dining Award"],
                "mustTryDishes": ["Hanoi-style duck breast", "Local herb salad", "Vietnamese craft cocktails", "Seasonal tasting menu"],
                "openingHours": "Mon-Sat 5:00pm-11:00pm, Closed Sunday",
                "bookingLinks": {
                    "website": "https://www.homehanoi.com",
                    "reservation": "https://www.homehanoi.com/reservations",
                    "phone": "tel:+84-24-6680-8555",
                    "instagram": "https://www.instagram.com/homehanoi",
                    "eater": "https://www.eater.com/hanoi-rising-restaurants",
                    "timeout": "https://www.timeout.com/hanoi/restaurants/home-hanoi-restaurant"
                }
            }
        ];

        const flightBookingLinks = {
            "google": "https://www.google.com/travel/flights",
            "kayak": "https://www.kayak.com/flights",
            "expedia": "https://www.expedia.com/Flights",
            "vietnamAirlines": "https://www.vietnamairlines.com",
            "vietjet": "https://www.vietjetair.com",
            "skyscanner": "https://www.skyscanner.com"
        };

        const regionColors = {
            north: '#10B981',
            central: '#F59E0B',
            south: '#EF4444'
        };

        // Helper function to create Google search links
        const createGoogleSearchLink = (query) => {
            const encodedQuery = encodeURIComponent(query + " Vietnam travel");
            return `https://www.google.com/search?q=${encodedQuery}`;
        };

        // Components
        const ClickableHighlight = ({ highlight }) => (
            <a
                href={createGoogleSearchLink(highlight)}
                target="_blank"
                rel="noopener noreferrer"
                className="highlight-link"
            >
                {highlight}
            </a>
        );

        const AccommodationCard = ({ destination }) => {
            if (!destination.accommodations) return null;

            return (
                <div className="bg-purple-50 border border-purple-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-purple-900 mb-3 flex items-center gap-2">
                        🏠 Accommodations
                    </h3>
                    <div className="space-y-3">
                        {destination.accommodations.map((accommodation, index) => (
                            <div key={index} className="border-b border-purple-100 pb-2 last:border-b-0">
                                <a
                                    href={accommodation.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="font-medium text-purple-800 hover:text-purple-900"
                                >
                                    {accommodation.name} ↗
                                </a>
                                <p className="text-sm text-purple-700">
                                    {accommodation.type} - {accommodation.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const DecemberWeatherCard = ({ destination }) => {
            if (!destination.decemberWeather) return null;

            const weather = destination.decemberWeather;
            return (
                <div className="bg-sky-50 border border-sky-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-sky-900 mb-3 flex items-center gap-2">
                        🌤️ December Weather
                    </h3>
                    <div className="space-y-3">
                        <div className="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span className="font-medium text-sky-800">Temperature:</span>
                                <p className="text-sky-700">{weather.temperature}</p>
                            </div>
                            <div>
                                <span className="font-medium text-sky-800">Rainfall:</span>
                                <p className="text-sky-700">{weather.rainfall}</p>
                            </div>
                            <div>
                                <span className="font-medium text-sky-800">Humidity:</span>
                                <p className="text-sky-700">{weather.humidity}</p>
                            </div>
                            <div>
                                <span className="font-medium text-sky-800">Rainy Days:</span>
                                <p className="text-sky-700">{weather.rainyDays}</p>
                            </div>
                        </div>
                        <div>
                            <span className="font-medium text-sky-800">Conditions:</span>
                            <p className="text-sky-700 text-sm">{weather.conditions}</p>
                        </div>
                        <div>
                            <span className="font-medium text-sky-800">What to Pack:</span>
                            <p className="text-sky-700 text-sm">{weather.clothing}</p>
                        </div>
                        <div className="flex gap-6">
                            <div className="flex-1">
                                <span className="font-medium text-green-800">✓ Pros:</span>
                                <ul className="text-xs text-green-700 list-disc list-inside mt-1">
                                    {weather.pros.map((pro, index) => (
                                        <li key={index}>{pro}</li>
                                    ))}
                                </ul>
                            </div>
                            <div className="flex-1">
                                <span className="font-medium text-amber-800">⚠ Consider:</span>
                                <ul className="text-xs text-amber-700 list-disc list-inside mt-1">
                                    {weather.cons.map((con, index) => (
                                        <li key={index}>{con}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const TransportationDetailsCard = ({ destination }) => {
            if (!destination.detailedTransportation) return null;

            const transport = destination.detailedTransportation;

            return (
                <div className="bg-orange-50 border border-orange-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-orange-900 mb-3 flex items-center gap-2">
                        🚌 Transportation Details
                    </h3>

                    {/* Long Distance Transportation */}
                    {Object.keys(transport).filter(key => key.startsWith('from')).map(routeKey => {
                        const route = transport[routeKey];
                        const fromCity = routeKey.replace('from', '');

                        return (
                            <div key={routeKey} className="mb-4">
                                <h4 className="font-medium text-orange-800 mb-2 text-sm">
                                    🛫 From {fromCity}:
                                </h4>

                                {route.flights && (
                                    <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                        <div className="font-medium text-orange-700 text-xs mb-1">✈️ Flights:</div>
                                        <div className="text-xs text-gray-700 space-y-1">
                                            <div><strong>Airlines:</strong> {route.flights.airlines.join(', ')}</div>
                                            <div><strong>Schedule:</strong> {route.flights.frequency}</div>
                                            <div><strong>Duration:</strong> {route.flights.duration}</div>
                                            <div><strong>Cost:</strong> {route.flights.cost}</div>
                                            <div><strong>Route:</strong> {route.flights.airports}</div>
                                        </div>
                                    </div>
                                )}

                                {route.trains && (
                                    <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                        <div className="font-medium text-orange-700 text-xs mb-1">🚂 Trains:</div>
                                        <div className="text-xs text-gray-700 space-y-1">
                                            <div><strong>Routes:</strong> {route.trains.routes.join(', ')}</div>
                                            <div><strong>Schedule:</strong></div>
                                            <div className="whitespace-pre-line pl-2">{route.trains.schedule}</div>
                                            <div><strong>Cost:</strong> {route.trains.cost}</div>
                                            {route.trains.booking && <div><strong>Booking:</strong> {route.trains.booking}</div>}
                                            {route.trains.note && <div><strong>Note:</strong> {route.trains.note}</div>}
                                            {route.trains.station && <div><strong>Station:</strong> {route.trains.station}</div>}
                                        </div>
                                    </div>
                                )}

                                {route.buses && (
                                    <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                        <div className="font-medium text-orange-700 text-xs mb-1">🚌 Buses:</div>
                                        <div className="text-xs text-gray-700 space-y-1">
                                            <div><strong>Companies:</strong> {route.buses.companies.join(', ')}</div>
                                            <div><strong>Schedule:</strong> {route.buses.schedule}</div>
                                            <div><strong>Duration:</strong> {route.buses.duration}</div>
                                            <div><strong>Cost:</strong> {route.buses.cost}</div>
                                            {route.buses.pickup && <div><strong>Pickup:</strong> {route.buses.pickup}</div>}
                                            {route.buses.note && <div className="text-amber-600"><strong>Note:</strong> {route.buses.note}</div>}
                                        </div>
                                    </div>
                                )}

                                {route.privateCar && (
                                    <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                        <div className="font-medium text-orange-700 text-xs mb-1">🚗 Private Car:</div>
                                        <div className="text-xs text-gray-700 space-y-1">
                                            <div><strong>Duration:</strong> {route.privateCar.duration}</div>
                                            <div><strong>Cost:</strong> {route.privateCar.cost}</div>
                                            <div><strong>Companies:</strong> {route.privateCar.companies.join(', ')}</div>
                                            <div><strong>Advantages:</strong> {route.privateCar.advantages}</div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        );
                    })}

                    {/* Local Transportation */}
                    {transport.localTransportation && (
                        <div className="mt-4 pt-4 border-t border-orange-200">
                            <h4 className="font-medium text-orange-800 mb-2 text-sm">
                                🏃‍♂️ Local Transportation:
                            </h4>

                            {transport.localTransportation.airport && (
                                <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                    <div className="font-medium text-orange-700 text-xs mb-1">✈️ Airport Transfer:</div>
                                    <div className="text-xs text-gray-700 space-y-1">
                                        {transport.localTransportation.airport.taxi && <div><strong>Taxi:</strong> {transport.localTransportation.airport.taxi}</div>}
                                        {transport.localTransportation.airport.bus && <div><strong>Bus:</strong> {transport.localTransportation.airport.bus}</div>}
                                        {transport.localTransportation.airport.shuttle && <div><strong>Shuttle:</strong> {transport.localTransportation.airport.shuttle}</div>}
                                    </div>
                                </div>
                            )}

                            {transport.localTransportation.cityTransport && (
                                <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                    <div className="font-medium text-orange-700 text-xs mb-1">🌆 City Transport:</div>
                                    <div className="text-xs text-gray-700 space-y-1">
                                        {Object.entries(transport.localTransportation.cityTransport).map(([key, value]) => (
                                            <div key={key}><strong>{key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> {value}</div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {transport.localTransportation.rentalOptions && (
                                <div className="mb-3 p-2 bg-white rounded border border-orange-100">
                                    <div className="font-medium text-orange-700 text-xs mb-1">🛵 Rental Options:</div>
                                    <div className="text-xs text-gray-700 space-y-1">
                                        {Object.entries(transport.localTransportation.rentalOptions).map(([key, value]) => (
                                            <div key={key}><strong>{key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> {value}</div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const DecemberItineraryCard = () => (
            <div className="bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-6">
                <h2 className="text-xl font-semibold text-indigo-900 mb-4 flex items-center gap-2">
                    📅 December 2024 Itinerary Ideas
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {decemberItineraries.map((itinerary, index) => (
                        <div key={index} className="bg-white border border-indigo-100 rounded-lg p-4">
                            <h3 className="font-semibold text-indigo-800 mb-2">{itinerary.name}</h3>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Duration:</strong> {itinerary.duration}
                            </p>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Route:</strong> {itinerary.route}
                            </p>
                            <p className="text-sm text-indigo-700 mb-2">
                                <strong>Best for:</strong> {itinerary.bestFor}
                            </p>
                            <div className="mt-2">
                                <p className="text-xs text-indigo-600 font-medium">Highlights:</p>
                                <ul className="text-xs text-indigo-600 list-disc list-inside">
                                    {itinerary.highlights.map((highlight, idx) => (
                                        <li key={idx}>{highlight}</li>
                                    ))}
                                </ul>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const FlightInfoCard = ({ destination }) => {
            if (!destination.flightInfo && !destination.airports) return null;

            return (
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-blue-900 mb-3 flex items-center gap-2">
                        ✈️ Flight Information
                    </h3>

                    {destination.airports && (
                        <div className="mb-3">
                            <p className="text-sm text-blue-800">
                                <strong>Airport:</strong> {destination.airports.main}
                            </p>
                            <p className="text-sm text-blue-700">
                                📍 {destination.airports.distanceFromCenter}
                            </p>
                            {destination.airports.note && (
                                <p className="text-xs text-blue-600 mt-1 font-medium">
                                    💡 {destination.airports.note}
                                </p>
                            )}
                        </div>
                    )}

                    {destination.flightInfo && (
                        <div className="space-y-2">
                            <p className="text-sm text-blue-800">
                                <strong>From USA:</strong> {destination.flightInfo.fromUSA}
                            </p>
                            {destination.flightInfo.domesticFromSGN && (
                                <p className="text-sm text-blue-800">
                                    <strong>From Saigon:</strong> {destination.flightInfo.domesticFromSGN}
                                </p>
                            )}
                            {destination.flightInfo.domesticFromHAN && (
                                <p className="text-sm text-blue-800">
                                    <strong>From Hanoi:</strong> {destination.flightInfo.domesticFromHAN}
                                </p>
                            )}
                            <div className="flex flex-wrap gap-2 mt-3">
                                {Object.entries(flightBookingLinks).map(([name, url]) => (
                                    <a
                                        key={name}
                                        href={url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"
                                    >
                                        {name}
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const TourProvidersCard = ({ destination }) => {
            if (!destination.tourProviders) return null;

            return (
                <div className="bg-green-50 border border-green-200 rounded-lg p-4 mt-4">
                    <h3 className="font-semibold text-green-900 mb-3 flex items-center gap-2">
                        🎯 Tour Providers
                    </h3>
                    <div className="space-y-3">
                        {destination.tourProviders.map((provider, index) => (
                            <div key={index} className="border-b border-green-100 pb-2 last:border-b-0">
                                <a
                                    href={provider.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="font-medium text-green-800 hover:text-green-900"
                                >
                                    {provider.name} ↗
                                </a>
                                <p className="text-sm text-green-700">{provider.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const EnhancedRestaurantCard = ({ restaurant }) => (
            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-4">
                <div className="flex items-start justify-between mb-3">
                    <div>
                        <h3 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                            {restaurant.name}
                            {restaurant.bourdainPick && (
                                <span className="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-medium">
                                    Bourdain's Pick
                                </span>
                            )}
                            {restaurant.awards?.includes("Michelin One Star 2025") && (
                                <span className="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full font-medium">
                                    ⭐ Michelin Star
                                </span>
                            )}
                        </h3>
                        <p className="text-blue-600 font-medium">{restaurant.specialty}</p>
                        {restaurant.address && (
                            <p className="text-sm text-gray-500 mt-1">📍 {restaurant.address}</p>
                        )}
                    </div>
                    <div className="text-right">
                        <div className="text-lg font-bold text-green-600">{restaurant.priceRange}</div>
                        {restaurant.userRating && (
                            <div className="flex items-center gap-1 mt-1">
                                <span className="text-yellow-400">★</span>
                                <span className="text-sm font-medium">{restaurant.userRating}/5</span>
                            </div>
                        )}
                    </div>
                </div>

                <p className="text-gray-700 mb-4">{restaurant.description}</p>

                {restaurant.mustTryDishes && (
                    <div className="mb-4">
                        <h4 className="font-medium text-gray-800 mb-2">Must Try Dishes:</h4>
                        <div className="flex flex-wrap gap-2">
                            {restaurant.mustTryDishes.map((dish, index) => (
                                <span key={index} className="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">
                                    {dish}
                                </span>
                            ))}
                        </div>
                    </div>
                )}

                <div className="flex items-center justify-between">
                    <div className="flex flex-wrap gap-2">
                        {restaurant.tags?.map((tag, index) => (
                            <span key={index} className="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">
                                {tag.replace('-', ' ')}
                            </span>
                        ))}
                    </div>

                    {restaurant.bookingLinks && (
                        <div className="flex flex-wrap gap-2">
                            {Object.entries(restaurant.bookingLinks).map(([platform, url]) => {
                                const linkLabels = {
                                    'michelin': '⭐ Michelin Guide',
                                    'website': '🌐 Official Website',
                                    'tripadvisor': '📸 TripAdvisor Photos',
                                    'photos': '📷 Photo Gallery',
                                    'chefProfile': '👨‍🍳 Chef Story',
                                    'chefStory': '📖 Chef Journey',
                                    'story': '📚 Restaurant Story',
                                    'blogReview': '✍️ Travel Blog',
                                    'hanoisGuide': '🏛️ Hanoi Guide',
                                    'google': '🔍 Google Search',
                                    'eater': '🍽️ Eater Essential',
                                    'timeout': '⏰ TimeOut Pick',
                                    'condeNast': '🌟 Condé Nast Traveler',
                                    'netflix': '🎬 Netflix Featured',
                                    'bourdain': '🍴 Bourdain Story',
                                    'cnnTravel': '📺 CNN Travel',
                                    'location': '📍 Google Maps',
                                    'jamesBeard': '🏆 James Beard',
                                    'lonelyPlanet': '🗺️ Lonely Planet',
                                    'foodBlogger': '📝 Food Blog',
                                    'nationalGeo': '🌍 National Geographic',
                                    'reservation': '📞 Make Reservation',
                                    'cookingClass': '👩‍🍳 Cooking Classes',
                                    'instagram': '📷 Instagram',
                                    'socialEnterprise': '🤝 Social Mission',
                                    'travelLeisure': '✈️ Travel + Leisure',
                                    'phone': '📞 Call Direct'
                                };
                                return (
                                    <a
                                        key={platform}
                                        href={url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 flex items-center gap-1"
                                    >
                                        {linkLabels[platform] || platform} ↗
                                    </a>
                                );
                            })}
                        </div>
                    )}
                </div>

                {restaurant.openingHours && (
                    <p className="text-sm text-gray-500 mt-2">
                        🕒 {restaurant.openingHours}
                    </p>
                )}
            </div>
        );

        const VietnamMap = ({ destinations, onDestinationClick }) => {
            useEffect(() => {
                const map = L.map('map').setView([16.0, 106.0], 6);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);

                // Create custom icon function with Vietnamese flag colors
                const createCustomIcon = (destination) => {
                    const getIconByType = (destination) => {
                        const name = destination.name.toLowerCase();
                        if (name.includes('saigon') || name.includes('ho chi minh')) return '🏙️';
                        if (name.includes('hanoi')) return '🏛️';
                        if (name.includes('hoi an')) return '🏮';
                        if (name.includes('sapa')) return '🏔️';
                        if (name.includes('ha giang')) return '🏍️';
                        if (name.includes('ha long') || name.includes('lan ha')) return '⛵';
                        if (name.includes('cat ba')) return '🏝️';
                        if (name.includes('ninh binh')) return '🛶';
                        return '📍';
                    };

                    const icon = getIconByType(destination);
                    const regionColor = regionColors[destination.region];

                    return L.divIcon({
                        html: `
                            <div style="
                                width: 40px;
                                height: 40px;
                                background: linear-gradient(135deg, #dc2626 0%, ${regionColor} 50%, #fbbf24 100%);
                                border: 3px solid #dc2626;
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 18px;
                                box-shadow: 0 4px 8px rgba(220, 38, 38, 0.3);
                                position: relative;
                                transform: translate(-50%, -50%);
                            ">
                                ${icon}
                                <div style="
                                    position: absolute;
                                    top: -8px;
                                    right: -8px;
                                    width: 16px;
                                    height: 16px;
                                    background: #fbbf24;
                                    border: 2px solid #dc2626;
                                    border-radius: 50%;
                                    font-size: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                ">
                                    ${destination.region === 'north' ? 'N' : destination.region === 'central' ? 'C' : 'S'}
                                </div>
                            </div>
                        `,
                        className: 'custom-marker',
                        iconSize: [40, 40],
                        iconAnchor: [20, 20],
                        popupAnchor: [0, -20]
                    });
                };

                // Add travel route lines with detailed information
                const travelRoutes = [
                    // North Vietnam cluster routes
                    {
                        from: 'hanoi', to: 'sapa', color: '#10B981', weight: 3,
                        distance: '350 km (217 miles)',
                        time: '5-6 hours by bus / 3.5h train + 1h bus',
                        cost: 'Bus: $8-12 / Train: $15-25',
                        method: '🚌 Bus or 🚂 Train + Bus'
                    },
                    {
                        from: 'hanoi', to: 'ha-giang', color: '#10B981', weight: 3,
                        distance: '300 km (186 miles)',
                        time: '6-8 hours by bus/van',
                        cost: 'Bus: $10-15 / Private van: $40-60',
                        method: '🚌 Bus or 🚐 Private Van'
                    },
                    {
                        from: 'hanoi', to: 'ha-long-bay', color: '#10B981', weight: 3,
                        distance: '165 km (103 miles)',
                        time: '2.5-3.5 hours by bus',
                        cost: 'Bus: $5-8 / Private car: $50-80',
                        method: '🚌 Bus or 🚗 Private Car'
                    },
                    {
                        from: 'hanoi', to: 'ninh-binh', color: '#10B981', weight: 3,
                        distance: '95 km (59 miles)',
                        time: '2 hours by bus/train',
                        cost: 'Bus: $3-5 / Train: $4-8',
                        method: '🚌 Bus or 🚂 Train'
                    },
                    {
                        from: 'ha-long-bay', to: 'lan-ha-bay', color: '#059669', weight: 2, dashArray: '10,10',
                        distance: '20 km (12 miles)',
                        time: '45 minutes by speedboat',
                        cost: 'Speedboat: $15-25',
                        method: '🚤 Speedboat Transfer'
                    },
                    {
                        from: 'lan-ha-bay', to: 'cat-ba', color: '#059669', weight: 2, dashArray: '10,10',
                        distance: '10 km (6 miles)',
                        time: '20 minutes by boat',
                        cost: 'Local boat: $3-8',
                        method: '⛵ Local Boat'
                    },

                    // North to Central route
                    {
                        from: 'hanoi', to: 'hoi-an', color: '#F59E0B', weight: 4, dashArray: '15,5',
                        distance: '760 km (472 miles)',
                        time: '12-14 hours by bus / 1.5h flight',
                        cost: 'Bus: $15-25 / Flight: $50-120',
                        method: '🚌 Overnight Bus or ✈️ Flight'
                    },

                    // Central to South route
                    {
                        from: 'hoi-an', to: 'saigon', color: '#EF4444', weight: 4, dashArray: '15,5',
                        distance: '1000 km (621 miles)',
                        time: '16-18 hours by bus / 1.5h flight',
                        cost: 'Bus: $18-30 / Flight: $45-100',
                        method: '🚌 Overnight Bus or ✈️ Flight'
                    },

                    // Main north-south connection
                    {
                        from: 'hanoi', to: 'saigon', color: '#dc2626', weight: 5, dashArray: '20,10',
                        distance: '1760 km (1094 miles)',
                        time: '30+ hours by bus / 2h flight / 36h train',
                        cost: 'Bus: $25-45 / Flight: $60-150 / Train: $35-80',
                        method: '✈️ Flight (best) or 🚂 Train or 🚌 Bus'
                    }
                ];

                // Draw route lines with hover tooltips
                travelRoutes.forEach(route => {
                    const fromDest = destinations.find(d => d.id === route.from);
                    const toDest = destinations.find(d => d.id === route.to);

                    if (fromDest && toDest) {
                        const line = L.polyline(
                            [fromDest.coordinates, toDest.coordinates],
                            {
                                color: route.color,
                                weight: route.weight,
                                opacity: 0.7,
                                dashArray: route.dashArray || null
                            }
                        ).addTo(map);

                        // Enhanced hover tooltip with comprehensive travel information
                        line.bindTooltip(`
                            <div style="min-width: 280px; font-family: system-ui, -apple-system, sans-serif;">
                                <div style="background: linear-gradient(45deg, #dc2626, ${route.color}); color: white; padding: 8px; margin: -8px -8px 8px -8px; border-radius: 4px 4px 0 0;">
                                    <strong style="font-size: 14px;">${fromDest.name} ↔ ${toDest.name}</strong>
                                </div>

                                <div style="padding: 4px 0;">
                                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                        <span style="width: 20px; font-size: 12px;">🛣️</span>
                                        <strong style="color: #dc2626; font-size: 13px;">Distance:</strong>
                                        <span style="margin-left: 8px; font-size: 13px;">${route.distance}</span>
                                    </div>

                                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                        <span style="width: 20px; font-size: 12px;">⏱️</span>
                                        <strong style="color: #dc2626; font-size: 13px;">Time:</strong>
                                        <span style="margin-left: 8px; font-size: 13px;">${route.time}</span>
                                    </div>

                                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                        <span style="width: 20px; font-size: 12px;">💰</span>
                                        <strong style="color: #dc2626; font-size: 13px;">Cost:</strong>
                                        <span style="margin-left: 8px; font-size: 13px;">${route.cost}</span>
                                    </div>

                                    <div style="display: flex; align-items: center;">
                                        <span style="width: 20px; font-size: 12px;">🚌</span>
                                        <strong style="color: #dc2626; font-size: 13px;">Method:</strong>
                                        <span style="margin-left: 8px; font-size: 13px;">${route.method}</span>
                                    </div>
                                </div>

                                <div style="background: #fef3c7; color: #92400e; padding: 6px; margin: 8px -8px -8px -8px; border-radius: 0 0 4px 4px; font-size: 11px; text-align: center;">
                                    💡 Hover over route to see details • Click destinations for full info
                                </div>
                            </div>
                        `, {
                            permanent: false,
                            sticky: true,
                            className: 'route-tooltip',
                            opacity: 0.95
                        });

                        // Enhanced hover effects
                        line.on('mouseover', function(e) {
                            this.setStyle({
                                weight: route.weight + 2,
                                opacity: 1.0,
                                color: route.color
                            });
                        });

                        line.on('mouseout', function(e) {
                            this.setStyle({
                                weight: route.weight,
                                opacity: 0.7,
                                color: route.color
                            });
                        });
                    }
                });

                // Set up global click handler for popup buttons
                window.markerClickHandler = (destinationId) => {
                    const destination = destinations.find(d => d.id === destinationId);
                    if (destination) {
                        onDestinationClick(destination);
                    }
                };

                // Add enhanced markers
                destinations.forEach(destination => {
                    const customIcon = createCustomIcon(destination);
                    const marker = L.marker(destination.coordinates, { icon: customIcon })
                        .addTo(map)
                        .bindPopup(`
                            <div class="text-center" style="min-width: 200px;">
                                <h3 class="font-bold text-lg" style="color: #dc2626;">${destination.name}</h3>
                                <p class="text-sm text-gray-600 mt-1">${destination.description.substring(0, 100)}...</p>
                                <div class="mt-2">
                                    <span class="inline-block px-2 py-1 rounded-full text-xs font-medium text-white"
                                          style="background: linear-gradient(45deg, #dc2626, ${regionColors[destination.region]}, #fbbf24);">
                                        ${destination.region.toUpperCase()} VIETNAM
                                    </span>
                                </div>
                                <div class="mt-2 text-xs text-gray-600">
                                    <p>📅 ${destination.duration}</p>
                                    ${destination.airports ? `<p>✈️ ${destination.airports.main}</p>` : ''}
                                    ${destination.decemberWeather ? `<p>🌡️ ${destination.decemberWeather.temperature}</p>` : ''}
                                </div>
                                <div class="mt-2">
                                    <button onclick="window.markerClickHandler('${destination.id}')"
                                            style="background: linear-gradient(45deg, #dc2626, #fbbf24); color: white; border: none; padding: 6px 12px; border-radius: 4px; font-size: 12px; cursor: pointer;">
                                        View Details ✨
                                    </button>
                                </div>
                            </div>
                        `);

                    marker.on('click', () => onDestinationClick(destination));
                });

                return () => {
                    map.remove();
                };
            }, [destinations]);

            return (
                <div>
                    <div className="mb-4 space-y-2">
                        <div className="flex gap-6 text-sm flex-wrap">
                            <div className="flex items-center gap-2">
                                <div className="w-6 h-6 rounded-full bg-gradient-to-r from-red-600 via-green-500 to-yellow-400 border-2 border-red-600 flex items-center justify-center text-xs">🏛️</div>
                                <span>North Vietnam</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-6 h-6 rounded-full bg-gradient-to-r from-red-600 via-yellow-500 to-yellow-400 border-2 border-red-600 flex items-center justify-center text-xs">🏮</div>
                                <span>Central Vietnam</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-6 h-6 rounded-full bg-gradient-to-r from-red-600 via-red-500 to-yellow-400 border-2 border-red-600 flex items-center justify-center text-xs">🏙️</div>
                                <span>South Vietnam</span>
                            </div>
                        </div>
                        <div className="flex gap-6 text-xs text-gray-600 flex-wrap">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-1 bg-green-500 rounded"></div>
                                <span>Regional Routes</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-1 bg-yellow-500 rounded" style={{background: 'repeating-linear-gradient(to right, #F59E0B 0px, #F59E0B 8px, transparent 8px, transparent 12px)'}}></div>
                                <span>Inter-Regional Routes</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-1 bg-red-600 rounded" style={{background: 'repeating-linear-gradient(to right, #dc2626 0px, #dc2626 12px, transparent 12px, transparent 16px)'}}></div>
                                <span>Main Highway</span>
                            </div>
                        </div>
                        <div className="text-xs text-blue-600 font-medium mt-2">
                            💡 Hover over any route line to see distance, time & cost details
                        </div>
                    </div>
                    <div id="map" style={{ height: '500px', width: '100%' }} className="rounded-lg shadow-lg border-2 border-red-200"></div>
                </div>
            );
        };

        const DestinationPage = ({ destination, onBack }) => (
            <div className="min-h-screen" style={{background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fef3c7 100%)'}}>
                <div className="shadow-sm border-b border-amber-300" style={{background: 'linear-gradient(90deg, #dc2626 0%, #fbbf24 100%)'}}>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                        <button
                            onClick={onBack}
                            className="flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-4 transition-colors"
                        >
                            ← Back to Map
                        </button>

                        <h1 className="text-3xl font-bold text-white mb-2 drop-shadow-lg">{destination.name}</h1>
                        <p className="text-gray-600 text-lg mb-4">{destination.description}</p>

                        <div className="flex items-center gap-4 text-sm text-gray-500 mb-6">
                            <span
                                className="px-3 py-1 rounded-full text-xs font-medium text-white"
                                style={{backgroundColor: regionColors[destination.region]}}
                            >
                                {destination.region.toUpperCase()} VIETNAM
                            </span>
                            <span>📅 {destination.duration}</span>
                            <span>🌡️ {destination.bestTimeToVisit}</span>
                            <span>📍 {destination.coordinates[0].toFixed(2)}, {destination.coordinates[1].toFixed(2)}</span>
                        </div>
                    </div>
                </div>

                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 space-y-6">
                            {/* Highlights */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">Highlights</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {destination.highlights.map((highlight, index) => (
                                        <div key={index} className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                                            <span className="text-blue-500 mt-1">•</span>
                                            <ClickableHighlight highlight={highlight} />
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Food Recommendations */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">🍜 Food Recommendations</h2>
                                {enhancedRestaurants.filter(r => r.destinationId === destination.id).map(restaurant => (
                                    <EnhancedRestaurantCard key={restaurant.id} restaurant={restaurant} />
                                ))}
                                {enhancedRestaurants.filter(r => r.destinationId === destination.id).length === 0 && (
                                    <p className="text-gray-600 text-center py-8">
                                        Detailed restaurant recommendations coming soon for this destination!
                                    </p>
                                )}
                            </div>
                        </div>

                        <div className="space-y-6">
                            {/* Flight Information */}
                            <FlightInfoCard destination={destination} />

                            {/* Tour Providers */}
                            <TourProvidersCard destination={destination} />

                            {/* Accommodations */}
                            <AccommodationCard destination={destination} />

                            {/* December Weather */}
                            <DecemberWeatherCard destination={destination} />

                            {/* Transportation Details */}
                            <TransportationDetailsCard destination={destination} />

                            {/* Transportation */}
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">🚌 Getting There</h2>
                                <div className="space-y-3">
                                    {destination.transportFromHanoi && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Hanoi:</span>
                                            <span className="text-gray-600">{destination.transportFromHanoi}</span>
                                        </div>
                                    )}
                                    {destination.transportFromSaigon && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Saigon:</span>
                                            <span className="text-gray-600">{destination.transportFromSaigon}</span>
                                        </div>
                                    )}
                                    {destination.transportFromHue && (
                                        <div className="flex items-start gap-3">
                                            <span className="font-medium text-gray-700">From Hue:</span>
                                            <span className="text-gray-600">{destination.transportFromHue}</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        const HomePage = ({ destinations, onDestinationSelect, onItineraryBuilder }) => {
            const [viewMode, setViewMode] = useState('map');
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedRegion, setSelectedRegion] = useState('all');
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [searchSuggestions, setSearchSuggestions] = useState([]);
            const [favorites, setFavorites] = useState(() => {
                const saved = localStorage.getItem('vietnam-planner-favorites');
                return saved ? JSON.parse(saved) : [];
            });
            const [recentSearches, setRecentSearches] = useState(() => {
                const saved = localStorage.getItem('vietnam-planner-recent-searches');
                return saved ? JSON.parse(saved) : [];
            });

            // Save search to recent history
            const saveSearchHistory = (searchTerm) => {
                if (!searchTerm.trim() || searchTerm.length < 2) return;

                const newRecentSearches = [
                    searchTerm,
                    ...recentSearches.filter(s => s !== searchTerm)
                ].slice(0, 10); // Keep last 10 searches

                setRecentSearches(newRecentSearches);
                localStorage.setItem('vietnam-planner-recent-searches', JSON.stringify(newRecentSearches));
            };

            // Smart search with autocomplete
            const generateSearchSuggestions = (term) => {
                if (!term || term.length < 1) {
                    // Show recent searches when no term is entered
                    return recentSearches.map(search => ({ type: 'recent', name: search, item: null }));
                }

                if (term.length < 2) return [];

                const allSearchItems = [
                    // Recent searches that match
                    ...recentSearches
                        .filter(search => search.toLowerCase().includes(term.toLowerCase()))
                        .map(search => ({ type: 'recent', name: search, item: null })),
                    // Destinations
                    ...destinations.map(d => ({ type: 'destination', name: d.name, item: d })),
                    // Highlights
                    ...destinations.flatMap(d => d.highlights.map(h => ({ type: 'highlight', name: h, item: d }))),
                    // Restaurants
                    ...enhancedRestaurants.map(r => ({ type: 'restaurant', name: r.name, item: r })),
                    // Common search terms
                    { type: 'activity', name: 'Street Food', item: null },
                    { type: 'activity', name: 'Michelin Star', item: null },
                    { type: 'activity', name: 'Anthony Bourdain', item: null },
                    { type: 'activity', name: 'Motorbike Loop', item: null },
                    { type: 'activity', name: 'UNESCO World Heritage', item: null }
                ];

                return allSearchItems
                    .filter(item => item.name.toLowerCase().includes(term.toLowerCase()))
                    .slice(0, 8) // Limit suggestions
                    .sort((a, b) => {
                        // Prioritize recent searches, then destinations, then restaurants, etc.
                        const priority = { recent: 0, destination: 1, restaurant: 2, highlight: 3, activity: 4 };
                        return priority[a.type] - priority[b.type];
                    });
            };

            const handleSearchChange = (value) => {
                setSearchTerm(value);
                const suggestions = generateSearchSuggestions(value);
                setSearchSuggestions(suggestions);
                setShowSuggestions(value.length > 1 && suggestions.length > 0);
            };

            const handleSuggestionClick = (suggestion) => {
                // Save to search history
                saveSearchHistory(suggestion.name);

                if (suggestion.type === 'destination' && suggestion.item) {
                    onDestinationSelect(suggestion.item);
                } else if (suggestion.type === 'restaurant') {
                    setSearchTerm(suggestion.name);
                } else {
                    setSearchTerm(suggestion.name);
                }
                setShowSuggestions(false);
            };

            // Favorites management
            const toggleFavorite = (destination) => {
                const newFavorites = favorites.includes(destination.id)
                    ? favorites.filter(id => id !== destination.id)
                    : [...favorites, destination.id];

                setFavorites(newFavorites);
                localStorage.setItem('vietnam-planner-favorites', JSON.stringify(newFavorites));
            };

            const filteredDestinations = destinations.filter(destination => {
                const matchesSearch = destination.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                     destination.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                     destination.highlights.some(h => h.toLowerCase().includes(searchTerm.toLowerCase()));
                const matchesRegion = selectedRegion === 'all' ||
                                     selectedRegion === 'favorites' ||
                                     destination.region === selectedRegion;
                const matchesFavorites = selectedRegion !== 'favorites' || favorites.includes(destination.id);
                return matchesSearch && matchesRegion && matchesFavorites;
            });

            return (
                <div className="min-h-screen" style={{background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fef3c7 100%)'}}>
                    <div className="shadow-sm border-b border-amber-300" style={{background: 'linear-gradient(90deg, #dc2626 0%, #fbbf24 100%)'}}>
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                            <h1 className="text-3xl font-bold text-white mb-2 drop-shadow-lg">Vietnam Holiday Planner</h1>
                            <p className="text-amber-100 mb-6 drop-shadow">Complete guide with Michelin-starred restaurants, authentic experiences, flight info, and December 2024 itineraries</p>

                            <div className="flex flex-col sm:flex-row gap-4 mb-6">
                                <div className="flex-1 relative">
                                    <input
                                        type="text"
                                        placeholder="Search destinations, restaurants, activities..."
                                        value={searchTerm}
                                        onChange={(e) => handleSearchChange(e.target.value)}
                                        onKeyPress={(e) => {
                                            if (e.key === 'Enter' && searchTerm.trim()) {
                                                saveSearchHistory(searchTerm);
                                                setShowSuggestions(false);
                                            }
                                        }}
                                        onFocus={() => {
                                            const suggestions = generateSearchSuggestions(searchTerm);
                                            setSearchSuggestions(suggestions);
                                            setShowSuggestions(suggestions.length > 0);
                                        }}
                                        onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}
                                        className="w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    />
                                    <div className="absolute right-3 top-2.5 text-gray-400">
                                        🔍
                                    </div>

                                    {/* Autocomplete Suggestions */}
                                    {showSuggestions && (
                                        <div className="absolute top-full left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 max-h-80 overflow-y-auto">
                                            {searchSuggestions.map((suggestion, index) => (
                                                <div
                                                    key={index}
                                                    onClick={() => handleSuggestionClick(suggestion)}
                                                    className="px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"
                                                >
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-lg">
                                                            {suggestion.type === 'destination' ? '📍' :
                                                             suggestion.type === 'restaurant' ? '🍜' :
                                                             suggestion.type === 'highlight' ? '✨' :
                                                             suggestion.type === 'recent' ? '🕐' : '🎯'}
                                                        </span>
                                                        <div>
                                                            <div className="font-medium text-gray-900">{suggestion.name}</div>
                                                            <div className="text-sm text-gray-500 capitalize">{suggestion.type}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                            {searchSuggestions.length === 0 && (
                                                <div className="px-4 py-3 text-gray-500 text-center">
                                                    No suggestions found
                                                </div>
                                            )}
                                            {searchSuggestions.some(s => s.type === 'recent') && (
                                                <div className="border-t border-gray-200 pt-2">
                                                    <button
                                                        onClick={(e) => {
                                                            e.stopPropagation();
                                                            setRecentSearches([]);
                                                            localStorage.removeItem('vietnam-planner-recent-searches');
                                                            setShowSuggestions(false);
                                                        }}
                                                        className="w-full px-4 py-2 text-sm text-gray-500 hover:bg-red-50 hover:text-red-600 transition-colors"
                                                    >
                                                        🗑️ Clear Recent Searches
                                                    </button>
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                                <select
                                    value={selectedRegion}
                                    onChange={(e) => setSelectedRegion(e.target.value)}
                                    className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="all">All Regions</option>
                                    <option value="north">North Vietnam</option>
                                    <option value="central">Central Vietnam</option>
                                    <option value="south">South Vietnam</option>
                                    <option value="favorites">❤️ Favorites Only</option>
                                </select>
                                <div className="flex bg-gray-100 rounded-lg p-1">
                                    <button
                                        onClick={() => setViewMode('map')}
                                        className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                                            viewMode === 'map' ? 'bg-white text-blue-600' : 'text-gray-600'
                                        }`}
                                    >
                                        🗺️ Map
                                    </button>
                                    <button
                                        onClick={() => setViewMode('grid')}
                                        className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
                                            viewMode === 'grid' ? 'bg-white text-blue-600' : 'text-gray-600'
                                        }`}
                                    >
                                        📋 Grid
                                    </button>
                                </div>
                                {/* Itinerary Builder Button - Force Deploy Fix */}
                                <button
                                    onClick={onItineraryBuilder}
                                    className="px-4 py-2 bg-gradient-to-r from-red-600 to-yellow-500 text-white font-medium rounded-lg hover:from-red-700 hover:to-yellow-600 transition-all duration-200 shadow-md hover:shadow-lg"
                                >
                                    📅 Build Itinerary
                                </button>
                            </div>

                            {/* Quick Flight Links */}
                            <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <h3 className="font-semibold text-blue-900 mb-2 flex items-center gap-2">
                                    ✈️ Book Flights to Vietnam
                                    <span className="text-sm font-normal text-blue-700">
                                        (SGN cheaper from US, HAN better for north-south route)
                                    </span>
                                </h3>
                                <div className="flex flex-wrap gap-2">
                                    {Object.entries(flightBookingLinks).map(([name, url]) => (
                                        <a
                                            key={name}
                                            href={url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200"
                                        >
                                            {name} ↗
                                        </a>
                                    ))}
                                </div>

                                {/* Favorites Section */}
                                {favorites.length > 0 && (
                                    <div className="bg-pink-50 border border-pink-200 rounded-lg p-4 mb-6">
                                        <h3 className="font-semibold text-pink-900 mb-2 flex items-center gap-2">
                                            ❤️ Your Favorite Destinations ({favorites.length})
                                        </h3>
                                        <div className="flex flex-wrap gap-2">
                                            {favorites.map(favoriteId => {
                                                const destination = destinations.find(d => d.id === favoriteId);
                                                if (!destination) return null;
                                                return (
                                                    <button
                                                        key={favoriteId}
                                                        onClick={() => onDestinationSelect(destination)}
                                                        className="text-sm bg-pink-100 text-pink-700 px-3 py-1 rounded-full hover:bg-pink-200 flex items-center gap-1"
                                                    >
                                                        <span>{destination.name}</span>
                                                        <button
                                                            onClick={(e) => {
                                                                e.stopPropagation();
                                                                toggleFavorite(destination);
                                                            }}
                                                            className="ml-1 hover:text-pink-900"
                                                        >
                                                            ×
                                                        </button>
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {/* December Itinerary Suggestions */}
                        <DecemberItineraryCard />

                        {viewMode === 'map' ? (
                            <VietnamMap
                                destinations={filteredDestinations}
                                onDestinationClick={onDestinationSelect}
                            />
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredDestinations.map((destination) => (
                                    <div key={destination.id} className="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 p-6 relative"
                                         onClick={() => onDestinationSelect(destination)}>
                                        <button
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                toggleFavorite(destination);
                                            }}
                                            className="absolute top-3 right-3 z-10 p-2 hover:bg-gray-100 rounded-full transition-colors"
                                            title={favorites.includes(destination.id) ? 'Remove from favorites' : 'Add to favorites'}
                                        >
                                            {favorites.includes(destination.id) ? '❤️' : '🤍'}
                                        </button>
                                        <div className="flex items-start justify-between mb-3 pr-10">
                                            <h3 className="text-xl font-bold text-gray-800">{destination.name}</h3>
                                            <span
                                                className="px-3 py-1 rounded-full text-xs font-medium text-white"
                                                style={{backgroundColor: regionColors[destination.region]}}
                                            >
                                                {destination.region.toUpperCase()}
                                            </span>
                                        </div>

                                        <p className="text-gray-600 text-sm mb-4 line-clamp-3">
                                            {destination.description}
                                        </p>

                                        <div className="space-y-2">
                                            <h4 className="font-semibold text-sm text-gray-700">Highlights:</h4>
                                            <ul className="text-xs text-gray-600 space-y-1">
                                                {destination.highlights.slice(0, 3).map((highlight, index) => (
                                                    <li key={index} className="flex items-start gap-2">
                                                        <span className="text-blue-500 mt-1">•</span>
                                                        <span>{highlight}</span>
                                                    </li>
                                                ))}
                                                {destination.highlights.length > 3 && (
                                                    <li className="text-blue-500 text-xs font-medium">
                                                        +{destination.highlights.length - 3} more highlights
                                                    </li>
                                                )}
                                            </ul>
                                        </div>

                                        <div className="mt-4 pt-4 border-t border-gray-100">
                                            <div className="text-sm text-gray-500 mb-2">
                                                📅 {destination.duration} • 🌡️ Best: December
                                            </div>
                                            {destination.airports && (
                                                <div className="text-xs text-gray-500 mb-2">
                                                    ✈️ {destination.airports.main}
                                                </div>
                                            )}
                                            {destination.accommodations && (
                                                <div className="text-xs text-gray-500 mb-2">
                                                    🏠 {destination.accommodations.length} Airbnb options
                                                </div>
                                            )}
                                            <button className="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium">
                                                Explore Details
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Itinerary Builder Component
        const ItineraryBuilder = ({ destinations, restaurants, onBack }) => {
            const [itinerary, setItinerary] = useState({
                name: "My Vietnam Adventure",
                days: [],
                travelers: 2,
                budget: { accommodation: 0, food: 0, transport: 0, activities: 0 }
            });
            const [draggedItem, setDraggedItem] = useState(null);
            const [showShareModal, setShowShareModal] = useState(false);
            const [shareableLink, setShareableLink] = useState('');
            const [collaborators, setCollaborators] = useState([]);

            // Travel time calculator
            const calculateTravelTime = (from, to) => {
                const travelTimes = {
                    'hanoi-saigon': { flight: '2h', train: '12h', bus: '30h' },
                    'hanoi-sapa': { bus: '5h', train: '8h' },
                    'hanoi-ha-long-bay': { bus: '3h', car: '2.5h' },
                    'hanoi-hoi-an': { flight: '1.5h', bus: '14h' },
                    'hoi-an-saigon': { flight: '1.5h', bus: '18h' },
                    'sapa-ha-giang': { bus: '4h', motorbike: '3h' }
                };

                const key = `${from.id}-${to.id}`;
                const reverseKey = `${to.id}-${from.id}`;
                return travelTimes[key] || travelTimes[reverseKey] || { bus: '6h', estimate: true };
            };

            // Collaborative features
            const generateShareableLink = () => {
                const itineraryData = encodeURIComponent(JSON.stringify(itinerary));
                const link = `${window.location.origin}${window.location.pathname}?itinerary=${itineraryData}`;
                setShareableLink(link);
                setShowShareModal(true);

                // Copy to clipboard
                navigator.clipboard.writeText(link).then(() => {
                    alert('Shareable link copied to clipboard!');
                }).catch(() => {
                    console.log('Please copy the link manually');
                });
            };

            const addCollaborator = (email) => {
                if (email && !collaborators.includes(email)) {
                    setCollaborators([...collaborators, email]);
                    // In a real app, this would send an invitation email
                    alert(`Invitation sent to ${email}!`);
                }
            };

            // Budget calculator
            const calculateBudget = (day) => {
                let total = 0;
                day.activities?.forEach(activity => {
                    if (activity.type === 'restaurant') {
                        const range = activity.priceRange;
                        total += range === '$' ? 8 : range === '$$' ? 25 : range === '$$$' ? 60 : 5;
                    } else if (activity.type === 'destination') {
                        total += 15; // Average activity cost
                    }
                });
                return total;
            };

            // Add day to itinerary
            const addDay = () => {
                setItinerary(prev => ({
                    ...prev,
                    days: [...prev.days, {
                        id: Date.now(),
                        date: new Date(Date.now() + prev.days.length * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                        destination: null,
                        activities: [],
                        notes: ''
                    }]
                }));
            };

            // Drag handlers
            const handleDragStart = (e, item) => {
                setDraggedItem(item);
                e.dataTransfer.effectAllowed = 'move';
            };

            const handleDragOver = (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            };

            const handleDrop = (e, dayIndex) => {
                e.preventDefault();
                if (!draggedItem) return;

                setItinerary(prev => {
                    const newDays = [...prev.days];
                    if (!newDays[dayIndex].activities) newDays[dayIndex].activities = [];
                    newDays[dayIndex].activities.push({
                        ...draggedItem,
                        id: Date.now(),
                        timeSlot: 'morning'
                    });
                    return { ...prev, days: newDays };
                });
                setDraggedItem(null);
            };

            // Weather integration
            const getClothingRecommendations = (destination, date) => {
                if (!destination?.decemberWeather) return "Check weather for packing tips";
                const weather = destination.decemberWeather;
                return weather.clothing;
            };

            return (
                <div className="min-h-screen" style={{background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fef3c7 100%)'}}>
                    <div className="shadow-sm border-b border-amber-300" style={{background: 'linear-gradient(90deg, #dc2626 0%, #fbbf24 100%)'}}>
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                            <button
                                onClick={onBack}
                                className="flex items-center gap-2 text-white hover:text-amber-100 mb-4 transition-colors"
                            >
                                ← Back to Map
                            </button>
                            <div className="flex justify-between items-start">
                                <div>
                                    <h1 className="text-3xl font-bold text-white mb-2 drop-shadow-lg">Itinerary Builder</h1>
                                    <p className="text-amber-100 drop-shadow">Plan your perfect Vietnam adventure with drag-and-drop simplicity</p>
                                </div>
                                <div className="flex gap-2">
                                    <button
                                        onClick={generateShareableLink}
                                        className="px-4 py-2 bg-white bg-opacity-20 text-white border border-white border-opacity-30 rounded-lg hover:bg-opacity-30 transition-all duration-200"
                                    >
                                        🔗 Share
                                    </button>
                                    <button
                                        onClick={() => {
                                            const email = prompt("Enter collaborator's email:");
                                            if (email) addCollaborator(email);
                                        }}
                                        className="px-4 py-2 bg-white bg-opacity-20 text-white border border-white border-opacity-30 rounded-lg hover:bg-opacity-30 transition-all duration-200"
                                    >
                                        👥 Invite
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">

                            {/* Sidebar - Destinations and Activities */}
                            <div className="lg:col-span-1">
                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
                                    <h3 className="font-semibold text-gray-900 mb-4">🏛️ Destinations</h3>
                                    <div className="space-y-2">
                                        {destinations.map(dest => (
                                            <div
                                                key={dest.id}
                                                draggable
                                                onDragStart={(e) => handleDragStart(e, { ...dest, type: 'destination' })}
                                                className="p-3 border border-gray-200 rounded cursor-move hover:bg-gray-50 transition-colors"
                                            >
                                                <div className="flex items-center gap-2">
                                                    <span className="text-lg">
                                                        {dest.name.includes('Hanoi') ? '🏛️' :
                                                         dest.name.includes('Saigon') ? '🏙️' :
                                                         dest.name.includes('Hoi An') ? '🏮' :
                                                         dest.name.includes('Sapa') ? '🏔️' :
                                                         dest.name.includes('Ha Long') ? '⛵' : '📍'}
                                                    </span>
                                                    <div>
                                                        <div className="font-medium text-sm">{dest.name}</div>
                                                        <div className="text-xs text-gray-500">{dest.duration}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                                    <h3 className="font-semibold text-gray-900 mb-4">🍜 Restaurants</h3>
                                    <div className="space-y-2 max-h-96 overflow-y-auto">
                                        {restaurants.slice(0, 10).map(restaurant => (
                                            <div
                                                key={restaurant.id}
                                                draggable
                                                onDragStart={(e) => handleDragStart(e, { ...restaurant, type: 'restaurant' })}
                                                className="p-2 border border-gray-200 rounded cursor-move hover:bg-gray-50 transition-colors"
                                            >
                                                <div className="font-medium text-sm">{restaurant.name}</div>
                                                <div className="text-xs text-gray-500">{restaurant.specialty}</div>
                                                <div className="text-xs text-green-600 font-medium">{restaurant.priceRange}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Main Timeline */}
                            <div className="lg:col-span-3">
                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                                    <div className="flex justify-between items-center mb-6">
                                        <div>
                                            <input
                                                type="text"
                                                value={itinerary.name}
                                                onChange={(e) => setItinerary(prev => ({ ...prev, name: e.target.value }))}
                                                className="text-2xl font-bold text-gray-900 bg-transparent border-none p-0 focus:outline-none focus:ring-0"
                                            />
                                            <div className="text-sm text-gray-500">
                                                {itinerary.days.length} days planned • {itinerary.travelers} travelers
                                            </div>
                                        </div>
                                        <div className="flex gap-2">
                                            <input
                                                type="number"
                                                value={itinerary.travelers}
                                                onChange={(e) => setItinerary(prev => ({ ...prev, travelers: parseInt(e.target.value) }))}
                                                className="w-16 px-2 py-1 border border-gray-300 rounded text-sm"
                                                min="1"
                                                max="10"
                                            />
                                            <button
                                                onClick={addDay}
                                                className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm"
                                            >
                                                + Add Day
                                            </button>
                                        </div>
                                    </div>

                                    {/* Timeline */}
                                    <div className="space-y-6">
                                        {itinerary.days.map((day, dayIndex) => (
                                            <div key={day.id} className="relative">
                                                <div className="flex items-center gap-4 mb-4">
                                                    <div className="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold">
                                                        {dayIndex + 1}
                                                    </div>
                                                    <input
                                                        type="date"
                                                        value={day.date}
                                                        onChange={(e) => {
                                                            const newDays = [...itinerary.days];
                                                            newDays[dayIndex].date = e.target.value;
                                                            setItinerary(prev => ({ ...prev, days: newDays }));
                                                        }}
                                                        className="px-3 py-1 border border-gray-300 rounded"
                                                    />
                                                    <div className="text-sm text-gray-500">
                                                        Budget: ${calculateBudget(day) * itinerary.travelers}
                                                    </div>
                                                </div>

                                                <div
                                                    onDragOver={handleDragOver}
                                                    onDrop={(e) => handleDrop(e, dayIndex)}
                                                    className="min-h-32 border-2 border-dashed border-gray-200 rounded-lg p-4 bg-gray-50 hover:border-blue-300 transition-colors"
                                                >
                                                    {day.activities?.length > 0 ? (
                                                        <div className="space-y-3">
                                                            {day.activities.map((activity, actIndex) => (
                                                                <div key={activity.id} className="bg-white rounded-lg border border-gray-200 p-3">
                                                                    <div className="flex justify-between items-start">
                                                                        <div>
                                                                            <div className="font-medium">{activity.name}</div>
                                                                            <div className="text-sm text-gray-600">
                                                                                {activity.type === 'restaurant' ? activity.specialty : activity.description?.substring(0, 100) + '...'}
                                                                            </div>
                                                                            {activity.type === 'restaurant' && (
                                                                                <div className="text-sm text-green-600 font-medium">{activity.priceRange} per person</div>
                                                                            )}
                                                                        </div>
                                                                        <select
                                                                            value={activity.timeSlot || 'morning'}
                                                                            onChange={(e) => {
                                                                                const newDays = [...itinerary.days];
                                                                                newDays[dayIndex].activities[actIndex].timeSlot = e.target.value;
                                                                                setItinerary(prev => ({ ...prev, days: newDays }));
                                                                            }}
                                                                            className="text-xs px-2 py-1 border border-gray-300 rounded"
                                                                        >
                                                                            <option value="morning">Morning</option>
                                                                            <option value="afternoon">Afternoon</option>
                                                                            <option value="evening">Evening</option>
                                                                        </select>
                                                                    </div>

                                                                    {/* Weather Integration */}
                                                                    {activity.type === 'destination' && activity.decemberWeather && (
                                                                        <div className="mt-2 p-2 bg-sky-50 border border-sky-200 rounded text-xs">
                                                                            <div><strong>Weather:</strong> {activity.decemberWeather.temperature}</div>
                                                                            <div><strong>Pack:</strong> {getClothingRecommendations(activity, day.date)}</div>
                                                                        </div>
                                                                    )}
                                                                </div>
                                                            ))}
                                                        </div>
                                                    ) : (
                                                        <div className="text-center text-gray-500 py-8">
                                                            Drag destinations and restaurants here to build your day
                                                        </div>
                                                    )}
                                                </div>

                                                {/* Travel time to next destination */}
                                                {dayIndex < itinerary.days.length - 1 && (
                                                    <div className="mt-4 text-center">
                                                        <div className="inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">
                                                            Travel Day {dayIndex + 1} → {dayIndex + 2}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Budget Summary */}
                                <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                    <h3 className="font-semibold text-gray-900 mb-4">💰 Budget Summary</h3>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        {['Food', 'Transport', 'Activities', 'Accommodation'].map(category => {
                                            const total = itinerary.days.reduce((sum, day) => sum + calculateBudget(day), 0) * itinerary.travelers;
                                            return (
                                                <div key={category} className="text-center">
                                                    <div className="text-2xl font-bold text-gray-900">${Math.round(total / 4)}</div>
                                                    <div className="text-sm text-gray-500">{category}</div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                    <div className="mt-4 pt-4 border-t border-gray-200">
                                        <div className="flex justify-between text-lg font-bold">
                                            <span>Total Estimated Cost:</span>
                                            <span>${itinerary.days.reduce((sum, day) => sum + calculateBudget(day), 0) * itinerary.travelers}</span>
                                        </div>
                                        <div className="text-sm text-gray-500">For {itinerary.travelers} travelers over {itinerary.days.length} days</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Collaborators Display */}
                    {collaborators.length > 0 && (
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4">
                            <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                                <h3 className="font-semibold text-gray-900 mb-2">👥 Collaborators</h3>
                                <div className="flex flex-wrap gap-2">
                                    {collaborators.map((email, index) => (
                                        <span key={index} className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center gap-1">
                                            {email}
                                            <button
                                                onClick={() => setCollaborators(collaborators.filter((_, i) => i !== index))}
                                                className="ml-1 hover:text-blue-900"
                                            >
                                                ×
                                            </button>
                                        </span>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Share Modal */}
                    {showShareModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onClick={() => setShowShareModal(false)}>
                            <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4" onClick={(e) => e.stopPropagation()}>
                                <h3 className="text-lg font-semibold mb-4">Share Your Itinerary</h3>
                                <p className="text-gray-600 mb-4">Copy this link to share your itinerary with others:</p>
                                <div className="bg-gray-100 p-3 rounded border mb-4">
                                    <code className="text-sm break-all">{shareableLink}</code>
                                </div>
                                <div className="flex gap-2 justify-end">
                                    <button
                                        onClick={() => navigator.clipboard.writeText(shareableLink)}
                                        className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                    >
                                        Copy Link
                                    </button>
                                    <button
                                        onClick={() => setShowShareModal(false)}
                                        className="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400"
                                    >
                                        Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Main App
        const App = () => {
            const [currentView, setCurrentView] = useState('home'); // 'home', 'destination', 'itinerary'
            const [selectedDestination, setSelectedDestination] = useState(null);

            if (currentView === 'destination' && selectedDestination) {
                return (
                    <DestinationPage
                        destination={selectedDestination}
                        onBack={() => {
                            setCurrentView('home');
                            setSelectedDestination(null);
                        }}
                    />
                );
            }

            if (currentView === 'itinerary') {
                return (
                    <ItineraryBuilder
                        destinations={destinations}
                        restaurants={enhancedRestaurants}
                        onBack={() => setCurrentView('home')}
                    />
                );
            }

            return (
                <HomePage
                    destinations={destinations}
                    onDestinationSelect={(dest) => {
                        setSelectedDestination(dest);
                        setCurrentView('destination');
                    }}
                    onItineraryBuilder={() => setCurrentView('itinerary')}
                />
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>